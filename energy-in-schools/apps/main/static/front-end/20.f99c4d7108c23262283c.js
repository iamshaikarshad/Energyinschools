(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{Ct44:function(e,t,n){"use strict";n.r(t);var r=n("q1tI"),o=n.n(r),a=n("/MKj"),i=n("ANjH"),c=n("RcoH"),s=(n("17x9"),n("tRbT")),l=n("H2TA"),u=n("DIgq"),f=n("qA3V"),p=n("ifHM"),y=n("DnAs"),b=n("WKyE"),d=n("LvDl"),h=n("ofer");function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function I(e,t){return(I=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k(e);if(t){var o=k(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return O(this,n)}}function O(e,t){if(t&&("object"===g(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return j(e)}function j(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var E={root:{height:"100%",padding:"36px 72px",position:"relative"},messageBlockWrapper:{backgroundColor:"rgba(255, 255, 255, 0.2)",borderRadius:"50px"},messageBlock:{fontSize:24,fontFamily:n("TQzm").c.primary,fontWeight:900,color:"rgb(255, 255, 255)",maxWidth:"90%"}},D=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&I(e,t)}(i,e);var t,n,r,a=w(i);function i(){var e;v(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return C(j(e=a.call.apply(a,[this].concat(n))),"state",{currentMessageIndex:0}),C(j(e),"messageChangeInterval",null),C(j(e),"clearMessageChangeInterval",(function(){clearInterval(e.messageChangeInterval),e.messageChangeInterval=null})),C(j(e),"setMessageChangeInterval",(function(){var t=e.props,n=t.previewMessages,r=t.interval;if(Object(d.isNil)(e.messageChangeInterval)||e.clearMessageChangeInterval(),!Object(d.isEmpty)(n)&&n.length>1){var o=n.length;e.messageChangeInterval=setInterval((function(){e.setState((function(e){return{currentMessageIndex:(e.currentMessageIndex+1)%o}}))}),r)}})),e}return t=i,(n=[{key:"componentDidMount",value:function(){this.setMessageChangeInterval()}},{key:"componentDidUpdate",value:function(e){var t=this.props.previewMessages;Object(d.isEqual)(e.previewMessages,t)||this.setMessageChangeInterval()}},{key:"componentWillUnmount",value:function(){this.clearMessageChangeInterval()}},{key:"render",value:function(){var e=this.props,t=e.classes,n=e.previewMessages,r=this.state.currentMessageIndex;return Object(d.isEmpty)(n)?null:o.a.createElement(s.a,{container:!0,className:t.root},o.a.createElement(s.a,{item:!0,container:!0,className:t.messageBlockWrapper,direction:"column",justify:"center",alignItems:"center",wrap:"nowrap"},o.a.createElement(h.a,{className:t.messageBlock,noWrap:!0},n[r])))}}])&&m(t.prototype,n),r&&m(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(o.a.Component);D.defaultProps={interval:1e4};var S=Object(l.a)(E)(D),P=n("utqy"),M=n("yu+7"),T=n("OEMT"),A=n("Jb/i"),R=n("hDP9"),_=n("r4gL"),x=n("nQFv"),W=n("/VNF"),H=n("+Cwg"),B=n("nddF"),L=n("boEu"),N=n("K0eG"),G=n("sGJt"),U=n.n(G),q=n("pRtd"),F=n.n(q),K=n("pEoX"),J=n.n(K),V=n("0y2O"),z=n.n(V),Q=n("6Gp6"),X=[{refreshInterval:Q.c,action:function(e,t){t(Object(L.a)(Q.d.energyDashboardLegacyV3))}}],Y=new P.a(u.a,{},[],[Q.b.schoolInformation],[{refreshInterval:108e5,action:function(e,t){t(Object(W.a)(e.schoolId))}}],{backgroundImg:F.a,backgroundColor:"rgb(53, 110, 183)",name:"Intro"}),$=new P.a(f.a,{messagesSlider:S},[],[Q.b.carbonIntensity],[{refreshInterval:18e5,action:function(e,t){t(Object(M.a)())}},{refreshInterval:864e5,action:function(e,t){t(Object(x.a)())}}],{backgroundImg:U.a,backgroundColor:"rgb(57, 193, 210)",name:"Carbon intensity"}),Z=new P.a(p.a,{messagesSlider:S},["offPeakyLeagueData","offPeakyYesterdayValue"],[Q.b.offPeakyLeague],[],{backgroundImg:F.a,backgroundColor:"rgb(53, 110, 183)",name:"Off-peaky points"}),ee=new P.a(y.a,{},[],[Q.b.energyTips],[{refreshInterval:864e5,action:function(e,t){t(Object(H.a)())}}],{backgroundImg:z.a,backgroundColor:"rgb(48, 121, 135)",name:"Energy tips"}),te=new P.a(b.a,{messagesSlider:S},["currentWeather","forecastWeather","electricityLiveData","electricityTodayData","electricityTodayCost","electricityLeagueData","lastWeekHistoricalCost","currentWeekHistoricalCost"],[Q.b.electricityLiveConsumption,Q.b.electricityTodayConsumption,Q.b.weather,Q.b.electricityTodayCost,Q.b.electricityLeague,Q.b.electricityTariffs,Q.b.lastWeekHistoricalCost,Q.b.currentWeekHistoricalCost],[{refreshInterval:6e4,action:function(e,t){t(Object(A.a)(N.k,e.schoolId))}},{refreshInterval:108e5,action:function(e,t){t(Object(R.a)(e.schoolId))}},{refreshInterval:108e5,action:function(e,t){t(Object(R.b)(e.schoolId))}},{refreshInterval:864e5,action:function(e,t){t(Object(B.b)(e.schoolId))}},{refreshInterval:18e5,action:function(e,t){t(Object(B.a)(e.schoolId))}},{refreshInterval:36e5,action:function(e,t){t(Object(T.a)(e.schoolId)),t(Object(T.c)(e.schoolId))}},{refreshInterval:108e5,action:function(e,t){t(Object(_.a)())}}],{backgroundImg:J.a,backgroundColor:"rgb(229, 150, 114)",name:"Electricity usage"}),ne=function(){return[Y,$,te,Z,ee]},re=n("G/D/"),oe=n("47xD"),ae=n("CeR/");function ie(e){return(ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ce(e){return function(e){if(Array.isArray(e))return se(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return se(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return se(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function se(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function le(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ue(e,t){return(ue=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function fe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ye(e);if(t){var o=ye(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return pe(this,n)}}function pe(e,t){if(t&&("object"===ie(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function ye(e){return(ye=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var be=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ue(e,t)}(i,e);var t,n,r,a=fe(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=a.call(this,e)).activeIntervalsIds=[],t}return t=i,(n=[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.match,r=t.dispatch,o=n.params.schoolId;Object(re.obtainDashboardToken)(o).then((function(){e.callDashboardActions(o)}),(function(e){r(oe.showAlert.bind("There is no school with that UID",Object(ae.a)(e))),console.log(e)}))}},{key:"shouldComponentUpdate",value:function(e){var t=this.props.energyDashboardData;return e.energyDashboardData.loadingEnds.status!==t.loadingEnds.status}},{key:"componentWillUnmount",value:function(){this.activeIntervalsIds.forEach((function(e){return clearInterval(e)})),this.activeIntervalsIds.length=0}},{key:"callDashboardActions",value:function(e){var t=this,n=this.props.dispatch,r=ne();X.forEach((function(r){var o=r.action,a=r.refreshInterval;o({schoolId:e},n),a&&t.activeIntervalsIds.push(setInterval((function(){o({schoolId:e},n)}),a))})),r.forEach((function(r){var o;r.invokeActions.forEach((function(t){t.action({schoolId:e},n)})),(o=t.activeIntervalsIds).push.apply(o,ce(r.invokeActions.map((function(t){return setInterval((function(){t.action({schoolId:e},n)}),t.refreshInterval)}))))}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.classes,r=t.energyDashboardData,a=ne();return o.a.createElement(s.a,{className:n.root,onKeyDown:this.keyPressHandler,tabIndex:"0"},o.a.createElement(s.a,{className:n.mainSlider},o.a.createElement(c.a,{ref:function(t){e.mainSlider=t},autoplay:!0,autoplayInterval:Q.a,withoutControls:!0,wrapAround:!0,slidesToScroll:1,pauseOnHover:!1,transitionMode:"fade",initialSlideHeight:1,speed:500,swiping:!1},a.map((function(e,t){return o.a.createElement(s.a,{className:n.slideGrid,key:"slide_".concat(t)}," ",e.renderMain(Object(Q.t)(r,e.slideKeys),r.loadingEnds,e.loadingFailedProps))})))))}}])&&le(t.prototype,n),r&&le(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(o.a.Component);t.default=Object(i.d)(Object(l.a)({root:{marginTop:0,marginBottom:0,paddingBottom:"0px",height:"100%",width:"100%",display:"block","& .slider, .slider-slide, .slider-list":{height:"100% !important"}},mainSlider:{position:"absolute",height:"100%",top:0,width:"100%",display:"block",overflow:"hidden"},slideGrid:{height:"100%"}}),Object(a.c)((function(e){return{energyDashboardData:e.energyDashboard}}),null))(be)}}]);