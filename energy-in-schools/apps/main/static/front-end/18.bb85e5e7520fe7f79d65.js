(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{EjlG:function(e,t,n){"use strict";n.r(t);var r=n("q1tI"),o=n.n(r),a=n("/MKj"),c=n("ANjH"),i=n("RcoH"),s=(n("17x9"),n("tRbT")),l=n("H2TA"),u=n("YXqb"),f=n("9OlM"),p=n("1wQb"),b=n("w793"),h=n("GkYJ"),d=n("LvDl"),y=n("ofer");function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function I(e,t){return(I=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k(e);if(t){var o=k(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return j(this,n)}}function j(e,t){if(t&&("object"===g(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return w(e)}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var E={root:{height:"100%",padding:"36px 72px",position:"relative"},messageBlockWrapper:{backgroundColor:"rgba(255, 255, 255, 0.2)",borderRadius:"50px"},messageBlock:{fontSize:24,fontFamily:n("TQzm").c.primary,fontWeight:900,color:"rgb(255, 255, 255)",maxWidth:"90%"}},S=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&I(e,t)}(c,e);var t,n,r,a=O(c);function c(){var e;v(this,c);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return C(w(e=a.call.apply(a,[this].concat(n))),"state",{currentMessageIndex:0}),C(w(e),"messageChangeInterval",null),C(w(e),"clearMessageChangeInterval",(function(){clearInterval(e.messageChangeInterval),e.messageChangeInterval=null})),C(w(e),"setMessageChangeInterval",(function(){var t=e.props,n=t.previewMessages,r=t.interval;if(Object(d.isNil)(e.messageChangeInterval)||e.clearMessageChangeInterval(),!Object(d.isEmpty)(n)&&n.length>1){var o=n.length;e.messageChangeInterval=setInterval((function(){e.setState((function(e){return{currentMessageIndex:(e.currentMessageIndex+1)%o}}))}),r)}})),e}return t=c,(n=[{key:"componentDidMount",value:function(){this.setMessageChangeInterval()}},{key:"componentDidUpdate",value:function(e){var t=this.props.previewMessages;Object(d.isEqual)(e.previewMessages,t)||this.setMessageChangeInterval()}},{key:"componentWillUnmount",value:function(){this.clearMessageChangeInterval()}},{key:"render",value:function(){var e=this.props,t=e.classes,n=e.previewMessages,r=this.state.currentMessageIndex;return Object(d.isEmpty)(n)?null:o.a.createElement(s.a,{container:!0,className:t.root},o.a.createElement(s.a,{item:!0,container:!0,className:t.messageBlockWrapper,direction:"column",justify:"center",alignItems:"center",wrap:"nowrap"},o.a.createElement(y.a,{className:t.messageBlock,noWrap:!0},n[r])))}}])&&m(t.prototype,n),r&&m(t,r),Object.defineProperty(t,"prototype",{writable:!1}),c}(o.a.Component);S.defaultProps={interval:1e4};var D=Object(l.a)(E)(S),P=n("mq8X"),M=n("Gj2X"),x=n("0nQm"),T=n("ZjC1"),_=n("yu+7"),A=n("OEMT"),R=n("9kxw"),G=n("Jb/i"),B=n("32dx"),W=n("r4gL"),Y=n("nQFv"),L=n("boEu"),U=n("K0eG"),H=n("sGJt"),N=n.n(H),F=n("pRtd"),J=n.n(F),Q=n("pEoX"),q=n.n(Q),K=n("GBQ1"),X=n.n(K),z=n("0y2O"),V=n.n(z),Z=n("6Gp6"),$=[{refreshInterval:Z.c,action:function(e,t){t(Object(L.a)(Z.d.energyDashboardLegacyV2))}}],ee=new P.a(u.a,{messagesSlider:D},[],[Z.b.carbonIntensity],[{refreshInterval:18e5,action:function(e,t){t(Object(_.a)())}},{refreshInterval:864e5,action:function(e,t){t(Object(Y.a)())}}],{backgroundImg:N.a,backgroundColor:"rgb(57, 193, 210)",name:"Carbon intensity"}),te=new P.a(f.a,{messagesSlider:D},["offPeakyYesterdayValue"],[Z.b.cashBack,Z.b.offPeakyLeague],[{refreshInterval:108e5,action:function(e,t){t(Object(x.a)(e.schoolId))}},{refreshInterval:108e5,action:function(e,t){t(Object(T.b)(e.schoolId))}},{refreshInterval:108e5,action:function(e,t){t(Object(T.a)())}}],{backgroundImg:J.a,backgroundColor:"rgb(53, 110, 183)",name:"Off-peaky points"}),ne=new P.a(p.a,{},[],[Z.b.energyFacts],[{refreshInterval:864e5,action:function(e,t){t(Object(M.a)(e.schoolId))}}],{backgroundImg:V.a,backgroundColor:"rgb(48, 121, 135)",name:"Energy facts"}),re=new P.a(b.a,{messagesSlider:D},["currentWeather","forecastWeather","electricityLiveData","electricityYesterdayData","electricityYesterdayCost"],[Z.b.electricityLiveConsumption,Z.b.electricityYesterdayConsumption,Z.b.weather,Z.b.electricityLeague,Z.b.electricityYesterdayCost,Z.b.electricityTariffs],[{refreshInterval:6e4,action:function(e,t){t(Object(G.a)(U.k,e.schoolId))}},{refreshInterval:108e5,action:function(e,t){t(Object(B.a)(e.schoolId))}},{refreshInterval:108e5,action:function(e,t){t(Object(B.b)(e.schoolId))}},{refreshInterval:36e5,action:function(e,t){t(Object(A.a)(e.schoolId)),t(Object(A.c)(e.schoolId))}},{refreshInterval:108e5,action:function(e,t){t(Object(R.a)(e.schoolId))}},{refreshInterval:108e5,action:function(e,t){t(Object(W.a)())}}],{backgroundImg:q.a,backgroundColor:"rgb(229, 150, 114)",name:"Electricity usage"}),oe=new P.a(h.a,{messagesSlider:D},["currentWeather","forecastWeather","gasLiveData","gasYesterdayData","gasYesterdayCost"],[Z.b.gasLiveConsumption,Z.b.gasYesterdayConsumption,Z.b.weather,Z.b.gasLeague,Z.b.gasYesterdayCost,Z.b.gasTariffs],[{refreshInterval:6e4,action:function(e,t){t(Object(G.b)(U.p,e.schoolId))}},{refreshInterval:108e5,action:function(e,t){t(Object(B.c)(e.schoolId))}},{refreshInterval:108e5,action:function(e,t){t(Object(B.d)(e.schoolId))}},{refreshInterval:108e5,action:function(e,t){t(Object(R.b)())}},{refreshInterval:108e5,action:function(e,t){t(Object(W.b)())}}],{backgroundImg:X.a,backgroundColor:"rgb(77, 209, 241)",name:"Gas usage"}),ae=function(e){return e?[ee,re,oe,te,ne]:[ee,re,te,ne]},ce=n("G/D/"),ie=n("47xD"),se=n("CeR/"),le=n("dHhH");function ue(e){return(ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fe(e){return function(e){if(Array.isArray(e))return pe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return pe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return pe(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function be(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function he(e,t){return(he=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function de(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ve(e);if(t){var o=ve(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ye(this,n)}}function ye(e,t){if(t&&("object"===ue(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ge(e)}function ge(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ve(e){return(ve=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var me=n("BOF4"),Ie=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&he(e,t)}(c,e);var t,n,r,a=de(c);function c(e){var t,n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),t=a.call(this,e),n=ge(t),o=function(e){if(!e)return!0;try{return me(e).energy_types.includes(U.p)}catch(e){return console.log(e),!0}},(r="getIfUseGas")in n?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,t.activeIntervalsIds=[],t}return t=c,(n=[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.match,r=t.dispatch,o=n.params.schoolId;Object(ce.obtainDashboardToken)(o).then((function(t){e.callDashboardActions(o,t.access)}),(function(e){r(ie.showAlert.bind("There is no school with that UID",Object(se.a)(e))),console.log(e)}))}},{key:"shouldComponentUpdate",value:function(e){var t=this.props.energyDashboardData;return e.energyDashboardData.loadingEnds.status!==t.loadingEnds.status}},{key:"componentWillUnmount",value:function(){this.activeIntervalsIds.forEach((function(e){return clearInterval(e)})),this.activeIntervalsIds.length=0}},{key:"callDashboardActions",value:function(e,t){var n=this,r=this.props.dispatch,o=ae(this.getIfUseGas(t));$.forEach((function(t){var o=t.action,a=t.refreshInterval;o({schoolId:e},r),a&&n.activeIntervalsIds.push(setInterval((function(){o({schoolId:e},r)}),a))})),o.forEach((function(t){var o;t.invokeActions.forEach((function(t){t.action({schoolId:e},r)})),(o=n.activeIntervalsIds).push.apply(o,fe(t.invokeActions.map((function(t){return setInterval((function(){t.action({schoolId:e},r)}),t.refreshInterval)}))))}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.classes,r=t.energyDashboardData,a=this.getIfUseGas(le.a.getAccessToken()),c=ae(a);return o.a.createElement(s.a,{className:n.root,onKeyDown:this.keyPressHandler,tabIndex:"0"},o.a.createElement(s.a,{className:n.mainSlider},o.a.createElement(i.a,{ref:function(t){e.mainSlider=t},autoplay:!0,autoplayInterval:Z.a,withoutControls:!0,wrapAround:!0,slidesToScroll:1,pauseOnHover:!1,transitionMode:"fade",initialSlideHeight:1,speed:500,swiping:!1},c.map((function(e,t){return o.a.createElement(s.a,{className:n.slideGrid,key:"slide_".concat(t)}," ",e.renderMain(Object(Z.t)(r,e.slideKeys),r.loadingEnds,e.loadingFailedProps))})))))}}])&&be(t.prototype,n),r&&be(t,r),Object.defineProperty(t,"prototype",{writable:!1}),c}(o.a.Component);t.default=Object(c.d)(Object(l.a)({root:{marginTop:0,marginBottom:0,paddingBottom:"0px",height:"100%",width:"100%",display:"block","& .slider, .slider-slide, .slider-list":{height:"100% !important"}},mainSlider:{position:"absolute",height:"100%",top:0,width:"100%",display:"block",overflow:"hidden"},slideGrid:{height:"100%"}}),Object(a.c)((function(e){return{energyDashboardData:e.energyDashboard}}),null))(Ie)}}]);