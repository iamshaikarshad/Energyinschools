(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{"3y3P":function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxNyAyMiI+CiAgPGRlZnM+CiAgICA8c3R5bGU+CiAgICAgIC5jbHMtMSB7CiAgICAgICAgZmlsbDogcmdiKDQxLCAxODAsIDI0MCk7CiAgICAgIH0KICAgIDwvc3R5bGU+CiAgPC9kZWZzPgogIDxwYXRoIGlkPSJlbGVjdHJpY2l0eSIgY2xhc3M9ImNscy0xIiBkPSJNNTMuMiw4LjM2OWEuODc0Ljg3NCwwLDAsMC0uOC0uNDloLTYuNTVsMi42OTQtNi43NmEuNzkxLjc5MSwwLDAsMC0uMS0uNzYyQS44ODUuODg1LDAsMCwwLDQ3LjczMywwaC02LjQ4YS44NzEuODcxLDAsMCwwLS44MTQuNTM0TDM2LjMzLDEwLjg0YS43OTEuNzkxLDAsMCwwLC4xLjc2Mi44ODUuODg1LDAsMCwwLC43MTYuMzU3bDcuMjctLjA0MS0zLjg0MSw5LjdhLjI3OC4yNzgsMCwwLDAsLjEyNS4zNDQuMzEyLjMxMiwwLDAsMCwuMzc5LS4wNTNMNTMuMDUxLDkuMjU4QS44LjgsMCwwLDAsNTMuMiw4LjM2OVoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0zNi4yNzQpIi8+Cjwvc3ZnPgo="},NHF4:function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyBpZD0iU3ZnanNTdmcxMDAxIiB3aWR0aD0iMjg4IiBoZWlnaHQ9IjI4OCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB2ZXJzaW9uPSIxLjEiIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4bWxuczpzdmdqcz0iaHR0cDovL3N2Z2pzLmNvbS9zdmdqcyI+PGRlZnMgaWQ9IlN2Z2pzRGVmczEwMDIiPjwvZGVmcz48ZyBpZD0iU3ZnanNHMTAwOCIgdHJhbnNmb3JtPSJtYXRyaXgoMSwwLDAsMSwwLDApIj48c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjI4OCIgaGVpZ2h0PSIyODgiIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDUyOC44OTkgNTI4Ljg5OSIgdmlld0JveD0iMCAwIDUyOC44OTkgNTI4Ljg5OSI+PHBhdGggZD0iTTMyOC44ODMsODkuMTI1bDEwNy41OSwxMDcuNTg5bC0yNzIuMzQsMjcyLjM0TDU2LjYwNCwzNjEuNDY1TDMyOC44ODMsODkuMTI1eiBNNTE4LjExMyw2My4xNzdsLTQ3Ljk4MS00Ny45ODEKCQljLTE4LjU0My0xOC41NDMtNDguNjUzLTE4LjU0My02Ny4yNTksMGwtNDUuOTYxLDQ1Ljk2MWwxMDcuNTksMTA3LjU5bDUzLjYxMS01My42MTEKCQlDNTMyLjQ5NSwxMDAuNzUzLDUzMi40OTUsNzcuNTU5LDUxOC4xMTMsNjMuMTc3eiBNMC4zLDUxMi42OWMtMS45NTgsOC44MTIsNS45OTgsMTYuNzA4LDE0LjgxMSwxNC41NjVsMTE5Ljg5MS0yOS4wNjkKCQlMMjcuNDczLDM5MC41OTdMMC4zLDUxMi42OXoiIGZpbGw9IiNmZmZmZmYiIGNsYXNzPSJjb2xvcjAwMCBzdmdTaGFwZSI+PC9wYXRoPjwvc3ZnPjwvZz48L3N2Zz4="},QGIQ:function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxNyAyMiI+CiAgPGRlZnM+CiAgICA8c3R5bGU+CiAgICAgIC5jbHMtMSB7CiAgICAgICAgZmlsbDogcmdiKDI0MywgMTQzLCA0OSk7CiAgICAgIH0KICAgIDwvc3R5bGU+CiAgPC9kZWZzPgogIDxnIGlkPSJnYXMiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC02NCkiPgogICAgPGcgaWQ9Ikdyb3VwXzIzMDYiIGRhdGEtbmFtZT0iR3JvdXAgMjMwNiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNjQgMCkiPgogICAgICA8cGF0aCBpZD0iUGF0aF8yMjc1IiBkYXRhLW5hbWU9IlBhdGggMjI3NSIgY2xhc3M9ImNscy0xIiBkPSJNODAuOTUyLDEyLjg4MWMtLjI2LTMuMjgxLTEuODM0LTUuMzM3LTMuMjIyLTcuMTUyLTEuMjg2LTEuNjgtMi40LTMuMTMtMi40LTUuMjdhLjQ1OC40NTgsMCwwLDAtLjI1Ni0uNDA4LjQ4LjQ4LDAsMCwwLS40OTEuMDM1QTExLjY1OSwxMS42NTksMCwwLDAsNzAuMTUzLDYuM2ExOS43MjIsMTkuNzIyLDAsMCwwLS40ODYsNC42NDhjLTEuOTI2LS40LTIuMzYyLTMuMi0yLjM2Ny0zLjIyNmEuNDYxLjQ2MSwwLDAsMC0uMjQ2LS4zNC40ODMuNDgzLDAsMCwwLS40MjgtLjAwOGMtLjEuMDQ3LTIuNDc5LDEuMjItMi42MTcsNS45LS4wMS4xNTYtLjAxLjMxMi0uMDEuNDY4QTguMzg3LDguMzg3LDAsMCwwLDcyLjUsMjJhLjA2OC4wNjgsMCwwLDAsLjAxOSwwaC4wMDZBOC4zODcsOC4zODcsMCwwLDAsODEsMTMuNzVDODEsMTMuNTIxLDgwLjk1MiwxMi44ODEsODAuOTUyLDEyLjg4MVptLTguNDUyLDguMmEyLjg4NiwyLjg4NiwwLDAsMS0yLjgzMy0yLjkyOWMwLS4wNTUsMC0uMTExLDAtLjE3OWEzLjYyMywzLjYyMywwLDAsMSwuMy0xLjQ1NSwxLjcyLDEuNzIsMCwwLDAsMS41NTksMS4xQS40NjUuNDY1LDAsMCwwLDcyLDE3LjE1N2E4LjkwNiw4LjkwNiwwLDAsMSwuMTgxLTIuMDg1LDQuMzksNC4zOSwwLDAsMSwuOTU2LTEuNzU3LDUuODU1LDUuODU1LDAsMCwwLC45NzQsMS43MzMsNS4xNDQsNS4xNDQsMCwwLDEsMS4yMTEsMi44NjJjLjAwNi4wNzkuMDEyLjE1OC4wMTIuMjQzQTIuODg2LDIuODg2LDAsMCwxLDcyLjUsMjEuMDgzWiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTY0IDApIi8+CiAgICA8L2c+CiAgPC9nPgo8L3N2Zz4K"},SN3g:function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxNiAxOCI+CiAgPGRlZnM+CiAgICA8c3R5bGU+CiAgICAgIC5jbHMtMSB7CiAgICAgICAgZmlsbDogI2ZmZjsKICAgICAgfQogICAgPC9zdHlsZT4KICA8L2RlZnM+CiAgPGcgaWQ9ImRlbGV0ZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMCAwKSI+CiAgICA8ZyBpZD0iR3JvdXBfOTcxIiBkYXRhLW5hbWU9Ikdyb3VwIDk3MSI+CiAgICAgIDxwYXRoIGlkPSJQYXRoXzQ5MCIgZGF0YS1uYW1lPSJQYXRoIDQ5MCIgY2xhc3M9ImNscy0xIiBkPSJNNDIuNCwyLjU5SDM4LjY1OFYxLjk4QTEuOTgyLDEuOTgyLDAsMCwwLDM2LjY3OSwwSDMzLjEyMWExLjk4MiwxLjk4MiwwLDAsMC0xLjk3OSwxLjk4VjIuNTlIMjcuNGEuNS41LDAsMCwwLDAsMWguOVYxNS4zMjhBMi42NzUsMi42NzUsMCwwLDAsMzAuOTcyLDE4aDcuODU2YTIuNjc1LDIuNjc1LDAsMCwwLDIuNjctMi42NzJWMy41OWguOWEuNS41LDAsMCwwLDAtMVoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yNi45KSIvPgogICAgPC9nPgogIDwvZz4KPC9zdmc+Cg=="},pwYJ:function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyOC43MjYgMjguNzI2Ij4KICA8ZGVmcz4KICAgIDxzdHlsZT4KICAgICAgLmNscy0xIHsKICAgICAgICBmaWxsOiAjZmZmZmZmOwogICAgICB9CiAgICA8L3N0eWxlPgogIDwvZGVmcz4KICA8ZyBpZD0iR3JvdXBfNTAzOSIgZGF0YS1uYW1lPSJHcm91cCA1MDM5IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTQwMSAtNDI3LjM3MykiPgogICAgPGcgaWQ9InN0YXRpc3RpY3NfMV8iIGRhdGEtbmFtZT0ic3RhdGlzdGljcyAoMSkiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE0MDEgNDI3LjM3MykiPgogICAgICA8cGF0aCBpZD0iUGF0aF84Njc3IiBkYXRhLW5hbWU9IlBhdGggODY3NyIgY2xhc3M9ImNscy0xIiBkPSJNMzMuNTI1LDEzLjQ2NWEyLjUxNSwyLjUxNSwwLDAsMCwxLjc1MS0uNzA4TDM3Ljc1MywxNGEyLjUyNCwyLjUyNCwwLDEsMCw0Ljc4My0uNzc2TDQ1LjksOS44NTJhMi41MjUsMi41MjUsMCwwLDAsMy41LTMuMDMzbDIuOTI1LTIuMTk0QTIuNTIxLDIuNTIxLDAsMSwwLDUxLjMxMywzLjI4TDQ4LjM4OCw1LjQ3M2EyLjUyNCwyLjUyNCwwLDAsMC0zLjY3NiwzLjE4OWwtMy4zNjcsMy4zNjdhMi41MTksMi41MTksMCwwLDAtMi44MzkuNDYybC0yLjQ3Ny0xLjIzOGEyLjUyNCwyLjUyNCwwLDEsMC0yLjUsMi4yMTNabTIwLjItMTEuNzgyYS44NDIuODQyLDAsMSwxLS44NDIuODQyQS44NDMuODQzLDAsMCwxLDUzLjcyMiwxLjY4M1pNNDYuOTksNi43MzNhLjg0Mi44NDIsMCwxLDEtLjg0Mi44NDJBLjg0My44NDMsMCwwLDEsNDYuOTksNi43MzNabS02LjczMyw2LjczM2EuODQyLjg0MiwwLDEsMS0uODQyLjg0MkEuODQzLjg0MywwLDAsMSw0MC4yNTcsMTMuNDY1Wk0zMy41MjUsMTAuMWEuODQyLjg0MiwwLDEsMS0uODQyLjg0MkEuODQzLjg0MywwLDAsMSwzMy41MjUsMTAuMVptMCwwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMjkuMjYxKSIvPgogICAgICA8cGF0aCBpZD0iUGF0aF84Njc4IiBkYXRhLW5hbWU9IlBhdGggODY3OCIgY2xhc3M9ImNscy0xIiBkPSJNMjcuODg0LDE2OC42MjdoLS45VjE1MC44NDJhLjg0Mi44NDIsMCwwLDAtLjg0Mi0uODQySDIyLjc3OGEuODQyLjg0MiwwLDAsMC0uODQyLjg0MnYxNy43ODVIMjAuMjU0VjE1NS44OTFhLjg0Mi44NDIsMCwwLDAtLjg0Mi0uODQySDE2LjA0NmEuODQyLjg0MiwwLDAsMC0uODQyLjg0MnYxMi43MzZIMTMuNTIxdi02YS44NDIuODQyLDAsMCwwLS44NDItLjg0Mkg5LjMxM2EuODQyLjg0MiwwLDAsMC0uODQyLjg0MnY2SDYuNzg5di05LjM2OWEuODQxLjg0MSwwLDAsMC0uODQyLS44NDJIMi41ODFhLjg0MS44NDEsMCwwLDAtLjg0Mi44NDJ2OS4zNjloLS45YS44NDIuODQyLDAsMSwwLDAsMS42ODNIMjcuODg0YS44NDIuODQyLDAsMSwwLDAtMS42ODNaTTIzLjYyLDE1MS42ODNIMjUuM3YxNi45NDRIMjMuNjJabS02LjczMyw1LjA0OWgxLjY4M3YxMS44OTRIMTYuODg4Wm0tNi43MzMsNi43MzNoMS42ODN2NS4xNjJIMTAuMTU1Wk0zLjQyMiwxNjAuMUg1LjEwNnY4LjUyOEgzLjQyMlptMCwwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwIC0xNDEuNTg0KSIvPgogICAgPC9nPgogIDwvZz4KPC9zdmc+Cg=="},sXw3:function(e,t,n){"use strict";n.r(t);var r=n("q1tI"),a=n.n(r),o=(n("17x9"),n("H2TA")),i=n("ANjH"),c=n("/MKj"),l=n("wd/R"),s=n.n(l),u=n("LvDl"),f=n("aXjy"),p=n.n(f),d=n("668i"),m=n("tRbT"),g=n("bqsI"),b=n("eD//"),y=n("1iKp"),h=n.n(y),w=n("PsDL"),v=n("AOnC"),j=n("Z3vd"),O=n("ofer"),M=n("tVbE"),x=n("IsqK"),S=n("vnJi"),E=n("1NhI"),D=n("hlFM"),N=n("cVXz"),C=n("jjAL"),I=n("5Mnx"),T=n.n(I),L=n("6ekt"),k=n.n(L),P=n("Ei1D"),R=n.n(P),A=n("vDqi"),_=n.n(A),z=n("K0eG"),B=n("r6IF"),U=n("47xD"),W=n("CeR/");function H(){return function(e){return new Promise((function(t,n){var r=(new Date).getTimezoneOffset();e(Object(U.showLoader)()),_.a.get("".concat(z.d,"/schools-metrics/?timezone_offset=").concat(r)).then((function(n){var r=n.data;e({type:B.S,data:r}),e(Object(U.hideLoader)()),t(r)})).catch((function(t){e(Object(U.hideLoader)()),e(Object(U.showMessageSnackbar)(Object(W.a)(t))),n(t),console.log(t)}))}))}}function Y(e){return function(t){return new Promise((function(n,r){var a=(new Date).getTimezoneOffset();t(Object(U.showLoader)()),_.a.get("".concat(z.d,"/schools-metrics/").concat(e,"/?timezone_offset=").concat(a)).then((function(e){var r=e.data;t(Object(U.hideLoader)()),n(r)})).catch((function(e){t(Object(U.hideLoader)()),t(Object(U.showMessageSnackbar)(Object(W.a)(e))),r(e),console.log(e)}))}))}}function G(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{showMessageOnSucces:!1,showMessageOnFailure:!1};return function(n){return new Promise((function(r,a){var o=t.showMessageOnSucces,i=t.showMessageOnFailure;Y(e)(n).then((function(t){if(n({type:B.V,data:t}),r(t),o){var a="Updated school metrics data successfully (school id: ".concat(e,")");n(Object(U.showMessageSnackbar)(a,5e3))}})).catch((function(t){var r="Failed to update school metrics data (school id: ".concat(e,")");i&&n(Object(U.showMessageSnackbar)(r,5e3)),a(t),console.log(r)}))}))}}function V(e){return function(t){return new Promise((function(n){t(Object(U.showLoader)()),_.a.get("".concat(z.d,"/smart-things/applications/").concat(e,"/refresh_token_health/")).then((function(e){var r=(e||{}).data;t(Object(U.hideLoader)()),n({data:r,success:!0})})).catch((function(e){t(Object(U.hideLoader)()),n({data:null,success:!1}),console.log(e)}))}))}}function Z(e,t){return{type:B.W,data:{schoolId:e,smartAppStatusData:t}}}function Q(e){return function(t){return new Promise((function(n){t(Object(U.showLoader)()),_.a.post("".concat(z.d,"/energy-meters/hildebrand/"),e).then((function(){t(Object(U.hideLoader)()),n(!0)})).catch((function(e){t(Object(U.hideLoader)()),t(Object(U.showMessageSnackbar)(Object(W.a)(e))),n(!1),console.log(e)}))}))}}function F(e,t){return function(n){return new Promise((function(r){n(Object(U.showLoader)()),_.a.put("".concat(z.d,"/energy-meters/hildebrand/").concat(t,"/"),e).then((function(){n(Object(U.hideLoader)()),r(!0)})).catch((function(e){n(Object(U.hideLoader)()),n(Object(U.showMessageSnackbar)(Object(W.a)(e))),r(!1),console.log(e)}))}))}}function J(e){if(!Object(u.isPlainObject)(e))return!1;for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t)&&!Object(u.isEmpty)(e[t]))return!0;return!1}var K,X,q,ee,te,ne,re,ae,oe,ie,ce,le,se,ue,fe,pe,de,me,ge,be,ye,he,we,ve,je,Oe,Me,xe,Se,Ee,De,Ne,Ce=n("t8CA"),Ie=n("QGIQ"),Te=n.n(Ie),Le=n("3y3P"),ke=n.n(Le);function Pe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Re(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ae(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Re(Object(n),!0).forEach((function(t){_e(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Re(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _e(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ze,Be=Object.freeze({pageTitle:"schools_monitoring_page_title_id",menuTitle:"schools_monitoring_page_title_id"}),Ue=Object.freeze({desktop:"desktop",mobile:"mobile"}),We=Object.freeze({all_schools:"all_schools",real_schools:"real_schools",test_schools:"test_schools"}),He=[{value:We.all_schools,label:"All schools"},{value:We.real_schools,label:"Real schools"},{value:We.test_schools,label:"Test schools"}],Ye=Object.freeze({alert:"rgba(243, 20, 49, 1)",success:"rgba(75, 181, 67, 1)",warning:"rgba(255, 174, 66, 1)",strongWarning:"rgba(255, 134, 66, 1)",liteWarning:"rgba(255, 204, 66, 1)",unknown:"rgba(168, 168, 168, 1)"}),Ge=Object.freeze({dataNotAvailable:"dataNotAvailable",success:"success",unknown:"unknown"}),Ve=Object.freeze((_e(K={},Ge.dataNotAvailable,"data is not available!"),_e(K,Ge.success,"success"),_e(K,Ge.unknown,"unknown status!"),K)),Ze=Object.freeze((_e(X={},Ge.dataNotAvailable,Ye.alert),_e(X,Ge.success,Ye.success),_e(X,Ge.unknown,Ye.unknown),X)),Qe=Object.freeze({nullable:"—",question:"?",nA:"N/A"}),Fe=Object.freeze({connected:"Smart app connected",noSmartApp:"No connected smart app",refreshTokenExpired:"Refresh token expired",refreshTokenShouldBeRefreshed:"Refresh token should be refreshed",refreshTokenBroken:"Refresh token broken",unknown:"Unknown"}),Je=Object.freeze({present:"present",missing:"missing"}),Ke=(Object.freeze((_e(q={},Je.present,"present"),_e(q,Je.missing,"missing"),q)),Object.freeze({total:"total",yesterdayValue:"yesterday_value",daysWithPositiveValue:"days_with_positive_value",dayAvgValue:"day_avg_value"})),Xe=(Object.values(Ke),Object.freeze((_e(ee={},Ke.total,"Total"),_e(ee,Ke.yesterdayValue,"Yesterday value"),_e(ee,Ke.daysWithPositiveValue,"Days with positive value"),_e(ee,Ke.dayAvgValue,"Daily average value"),ee)),Object.freeze({day:"day",value:"value"})),qe=(Object.values(Xe),Object.freeze((_e(te={},Xe.day,{label:"Day",sorting:!0}),_e(te,Xe.value,{label:"Value",sorting:!0,transformRule:function(e){return Object(u.isNil)(e)?Qe.nA:Object(u.round)(e,1)}}),te)),Object.freeze({electricity:"electricity",gas:"gas"})),$e=Object.values(qe),et=Object.freeze((_e(ne={},qe.electricity,"Electricity"),_e(ne,qe.gas,"Gas"),ne)),tt=Object.freeze({live:"live",today:"today",yesterday:"yesterday"}),nt=Object.values(tt),rt=Object.freeze((_e(re={},tt.live,"Live"),_e(re,tt.today,"Today"),_e(re,tt.yesterday,"Yesterday"),re)),at=Object.freeze({color:"rgba(0, 0, 0, 0.87)",icon:null,showOnDataUnavailable:!1}),ot=Object.freeze((_e(ae={},qe.electricity,{icon:ke.a,color:"rgb(41, 180, 240)",showOnDataUnavailable:!0}),_e(ae,qe.gas,{icon:Te.a,color:"rgb(243, 143, 49)",showOnDataUnavailable:!0}),ae)),it=Object.freeze(Ae(Ae({},Ge),{},{electricityDataNotAvailable:"electricityDataNotAvailable",gasDataNotAvailable:"gasDataNotAvailable",electricityLiveValueNotAvailable:"electricityLiveValueNotAvailable",electricityTodayValueNotAvailable:"electricityTodayValueNotAvailable",gasLiveValueNotAvailable:"gasLiveValueNotAvailable",gasTodayValueNotAvailable:"gasTodayValueNotAvailable",unknownEnergyTypeMetersPresent:"unknownEnergyTypeMetersPresent"})),ct=Object.freeze((_e(ce={},qe.electricity,{isMandatory:!0,typeNoDataStatus:it.electricityDataNotAvailable,typeNoValueStatus:(oe={},_e(oe,tt.live,it.electricityLiveValueNotAvailable),_e(oe,tt.today,it.electricityTodayValueNotAvailable),oe)}),_e(ce,qe.gas,{isMandatory:!1,typeNoDataStatus:it.gasDataNotAvailable,typeNoValueStatus:(ie={},_e(ie,tt.live,it.gasLiveValueNotAvailable),_e(ie,tt.today,it.gasTodayValueNotAvailable),ie)}),ce)),lt=Object.freeze(Ae(Ae({},Ve),{},(_e(le={},it.electricityDataNotAvailable,"no electricity meter!"),_e(le,it.gasDataNotAvailable,"no gas meter!"),_e(le,it.electricityLiveValueNotAvailable,"electricity live value is not available!"),_e(le,it.electricityTodayValueNotAvailable,"electricity today consumption is not available!"),_e(le,it.gasLiveValueNotAvailable,"gas live value is not available!"),_e(le,it.gasTodayValueNotAvailable,"gas today consumption is not available!"),_e(le,it.unknownEnergyTypeMetersPresent,"the school has meter(s) of unknown energy type!"),_e(le,it.success,"consumption data(live, today) is available"),le))),st=Object.freeze(Ae(Ae({},Ze),{},(_e(se={},it.electricityDataNotAvailable,Ye.alert),_e(se,it.gasDataNotAvailable,Ye.alert),_e(se,it.electricityLiveValueNotAvailable,Ye.warning),_e(se,it.electricityTodayValueNotAvailable,Ye.alert),_e(se,it.gasLiveValueNotAvailable,Ye.warning),_e(se,it.gasTodayValueNotAvailable,Ye.alert),_e(se,it.unknownEnergyTypeMetersPresent,Ye.warning),se))),ut=Object.freeze({electricityLive:"electricityLive",electricityYesterday:"electricityYesterday",gasYesterday:"gasYesterday",alwaysOn:"alwaysOn"}),ft=(Object.values(ut),Object.freeze((_e(ue={},ut.electricityLive,"Electricity live"),_e(ue,ut.electricityYesterday,"Electricity yesterday"),_e(ue,ut.gasYesterday,"Gas yesterday"),_e(ue,ut.alwaysOn,"Always-on usage"),ue))),pt=(Object.freeze((_e(fe={},ut.electricityLive,"electricity_live"),_e(fe,ut.electricityYesterday,"electricity_yesterday"),_e(fe,ut.gasYesterday,"gas_yesterday"),_e(fe,ut.alwaysOn,"always_on"),fe)),Object.freeze({name:"name",points:"points",unit:"unit",position:"position",totalMembers:"totalMembers"})),dt=(Object.values(pt),Object.freeze({watt:"watt",watt_per_pupil:"watt_per_pupil",watt_hour_per_pupil:"watt_hour_per_pupil",point:"point",point_per_pupil:"point_per_pupil"})),mt=Object.freeze((_e(pe={},dt.watt,"watt"),_e(pe,dt.watt_per_pupil,"watt per pupil"),_e(pe,dt.watt_hour_per_pupil,"watt-hour per pupil"),_e(pe,dt.point,"points"),_e(pe,dt.point_per_pupil,"points per pupil"),pe)),gt=(Object.freeze((_e(de={},pt.name,{name:"League",getValue:function(e){return ft[e]}}),_e(de,pt.points,{name:"School points",getValue:function(e,t){if(Object(u.isNil)(t))return Qe.nA;var n=t.own_points;return Object(u.isNil)(n)?Qe.nA:Object(u.round)(n,2)}}),_e(de,pt.unit,{name:"Points unit",getValue:function(e,t){if(Object(u.isNil)(t))return Qe.nA;var n=t.points_unit;return mt[n]||Qe.question}}),_e(de,pt.position,{name:"School position",getValue:function(e,t){if(Object(u.isNil)(t))return Qe.nA;var n=t.own_rank;return Object(u.isInteger)(n)?Object(Ce.a)(n).fullText:Qe.nA}}),_e(de,pt.totalMembers,{name:"Number of participants",getValue:function(e,t){return Object(u.isNil)(t)?Qe.nA:t.total_members||Qe.nA}}),de)),Object.freeze({energyMeters:"energy_meters",smartThingsEnergyMeters:"smart_things_energy_meters"})),bt=Object.values(gt),yt=Object.freeze((_e(me={},gt.energyMeters,"Energy meters"),_e(me,gt.smartThingsEnergyMeters,"SmartThings energy meters"),me)),ht=Object.freeze({name:"name",online:"online",total:"total"}),wt=Object.values(ht),vt=Object.freeze((_e(ge={},ht.name,{name:"Meters type",getValue:function(e){return yt[e]}}),_e(ge,ht.online,{name:"Connected meters count",getValue:function(e,t){if(Object(u.isNil)(t))return 0;var n=t.online;return Object(u.isNil)(n)?0:n}}),_e(ge,ht.total,{name:"Total meters count",getValue:function(e,t){if(Object(u.isNil)(t))return 0;var n=t.total;return Object(u.isNil)(n)?0:n}}),ge)),jt=Object.freeze({showNotOnlineMetersList:"showNotOnlineMetersList"}),Ot=Object.values(jt),Mt=Object.freeze(_e({},jt.showNotOnlineMetersList,{name:"Disconnected meters list*",label:"Show list",key:jt.showNotOnlineMetersList,getActionIsDisabled:function(e,t){return Object(u.isEmpty)(t)||Object(u.isEmpty)(t.not_online)}})),xt=Object.freeze(Ae(Ae({},Ge),{},{noMeters:"noMeters",disconnectedMetersPresent:"disconnectedMetersPresent"})),St=Object.freeze(Ae(Ae({},Ve),{},(_e(be={},xt.noMeters,"no energy meter!"),_e(be,xt.disconnectedMetersPresent,"there is disconnected meter(s)!"),_e(be,xt.success,"all the meters are connected"),be))),Et=Object.freeze(Ae(Ae({},Ze),{},(_e(ye={},xt.noMeters,Ye.alert),_e(ye,xt.disconnectedMetersPresent,Ye.alert),ye))),Dt=Object.freeze({normal:"normal"}),Nt=Object.values(Dt),Ct=(Object.freeze(_e({},Dt.normal,"Normal")),Object.freeze(_e({},Dt.normal,"normalTariffsUnavailable"))),It=Object.freeze(_e({},Ct[Dt.normal],"missing normal tariffs")),Tt=Object.freeze(_e({},Ct[Dt.normal],Ye.warning)),Lt=Object.freeze(Ae(Ae({},Ge),{},{noTariff:"noTariff"},Object(u.mapKeys)(Ct))),kt=Object.freeze(Ae(Ae(Ae({},Ve),It),{},(_e(he={},Lt.noTariff,"no tariff!"),_e(he,Lt.success,"present for all the tariffs use types"),he))),Pt=Object.freeze(Ae(Ae(Ae({},Ze),Tt),{},_e({},Lt.noTariff,Ye.alert))),Rt=Object.freeze(_e({},Dt.normal,"current_energy_tariffs")),At=Object.freeze({meterType:"meterType",wattHourCost:"wattHourCost",dailyFixedCost:"dailyFixedCost",resourceId:"resourceId",activeTimeStart:"activeTimeStart",activeTimeEnd:"activeTimeEnd",activeDateStart:"activeDateStart",activeDateEnd:"activeDateEnd"}),_t=Object.values(At),zt=Object.freeze((_e(we={},At.meterType,"meter_type"),_e(we,At.wattHourCost,"watt_hour_cost"),_e(we,At.dailyFixedCost,"daily_fixed_cost"),_e(we,At.resourceId,"resource_id"),_e(we,At.activeTimeStart,"active_time_start"),_e(we,At.activeTimeEnd,"active_time_end"),_e(we,At.activeDateStart,"active_date_start"),_e(we,At.activeDateEnd,"active_date_end"),we)),Bt=Math.pow(10,5),Ut=Math.pow(10,2),Wt=Object.freeze({capitalize:function(e){return Object(u.capitalize)(e)},getValue:function(e){return Object(u.isNil)(e)?Qe.nullable:e},round:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return Math.round(e*Math.pow(10,t))/Math.pow(10,t)}}),Ht=Object.freeze((_e(ve={},At.meterType,{name:"Energy type",getValue:Wt.capitalize}),_e(ve,At.wattHourCost,{name:"Cost(p/".concat(z.X[z.W.kilowattHour],")"),getValue:function(e){return Wt.getValue(Wt.round(e*Bt))}}),_e(ve,At.dailyFixedCost,{name:"Daily fixed cost(p)",getValue:function(e){return Wt.getValue(Wt.round(e*Ut))}}),_e(ve,At.resourceId,{name:"Resource id",getValue:Wt.getValue}),_e(ve,At.activeTimeStart,{name:"Active time start",getValue:Wt.getValue}),_e(ve,At.activeTimeEnd,{name:"Active time end",getValue:function(e){return Object(u.isNil)(e)?"00:00:00":e}}),_e(ve,At.activeDateStart,{name:"Active date start",getValue:Wt.getValue}),_e(ve,At.activeDateEnd,{name:"Active date end",getValue:Wt.getValue}),ve)),Yt=Object.freeze({sentToMUG:"sent_to_mug",supplierDownloadedContract:"supplier_downloaded_contract",switchAccepted:"switch_accepted",liveSwitchComplete:"live_switch_complete",failedContract:"failed_contract"}),Gt=Object.freeze({sublocationName:"sub_location_name",sublocationId:"sub_location_id",mugSiteId:"mug_site_id"}),Vt=Object.values(Gt),Zt=Object.freeze((_e(je={},Gt.sublocationName,{label:"Sublocation name",sorting:!1}),_e(je,Gt.sublocationId,{label:"Sublocation id",sorting:!1}),_e(je,Gt.mugSiteId,{label:"MUG site id",sorting:!1}),je)),Qt=Object.freeze({meterId:"meter_id",mugMeterId:"mug_meter_id"}),Ft=Object.values(Qt),Jt=Object.freeze((_e(Oe={},Qt.meterId,{label:"MPAN/MPRN",sorting:!0}),_e(Oe,Qt.mugMeterId,{label:"MUG meter id",sorting:!0}),Oe)),Kt=Object.values(Yt),Xt=Object.freeze((_e(Me={},Yt.sentToMUG,"Sent to MUG"),_e(Me,Yt.supplierDownloadedContract,"Suppliers contracts downloaded"),_e(Me,Yt.switchAccepted,"Switches accepted"),_e(Me,Yt.liveSwitchComplete,"Live switches complete"),_e(Me,Yt.failedContract,"Failed contracts"),Me)),qt=Object.freeze(Ae(Ae({},Ge),{},{noMugCustomerId:"noMugCustomerId",noMugSites:"noMugSites",existSiteWithNullableMUGSiteId:"existSiteWithNullableMUGSiteId",existMeterWithNullableMUGMeterId:"existMeterWithNullableMUGMeterId",existMeterNotBindedToResource:"existMeterNotBindedToResource",noMugMeters:"noMugMeters"})),$t=Object.freeze(Ae(Ae({},Ve),{},(_e(xe={},qt.noMugCustomerId,"no MUG customer id!"),_e(xe,qt.noMugSites,"no MUG site!"),_e(xe,qt.existSiteWithNullableMUGSiteId,"there exists location with nullable MUG site id!"),_e(xe,qt.existMeterWithNullableMUGMeterId,"there exists energy meter billing info with nullable MUG meter id!"),_e(xe,qt.existMeterNotBindedToResource,"there exists energy meter billing info that is not binded to any resource"),_e(xe,qt.noMugMeters,"no MUG meters!"),_e(xe,qt.success,"data is ok"),xe))),en=Object.freeze(Ae(Ae({},Ze),{},(_e(Se={},qt.noMugCustomerId,Ye.alert),_e(Se,qt.noMugSites,Ye.alert),_e(Se,qt.existSiteWithNullableMUGSiteId,Ye.warning),_e(Se,qt.existMeterWithNullableMUGMeterId,Ye.warning),_e(Se,qt.existMeterNotBindedToResource,Ye.warning),_e(Se,qt.noMugMeters,Ye.warning),Se))),tn=Object.freeze({metersConnectivity:"metersConnectivity",energyUsage:"energyUsage",tariffs:"tariffs",mugIntegration:"mugIntegration"}),nn=a.a.createElement("br",null),rn=function(e,t){var n=a.a.createElement("span",null,e),r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ve[Ge.unknown];return function(e){var o=t[e]||r;return a.a.createElement("span",null,n,nn,o)}},an=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ye.unknown;return function(n){return e[n]||t}},on=Object.freeze((_e(Ee={},tn.metersConnectivity,{order:1,title:"Meters",dataProp:"energy_meters",getStatus:function(e){var t=Object.values(gt).reduce((function(t,n){return t[n]=e[n],t}),{});if(Object(u.isEmpty)(t))return xt.dataNotAvailable;if(!J(t))return xt.noMeters;for(var n=!0,r=0;r<bt.length;r+=1){var a=t[bt[r]];if(!Object(u.isEmpty)(a)){var o=a.online,i=a.total;if(o===i&&o*i>0)continue;if(o<i)return xt.disconnectedMetersPresent;n=!1}}return n?xt.success:xt.unknown},getStatusInfo:rn("Energy meters connectivity:",St),getStatusColor:an(Et)}),_e(Ee,tn.energyUsage,{order:2,title:"Energy Usage",dataProp:"consumption",getStatus:function(e){if(Object(u.isEmpty)(e))return it.dataNotAvailable;for(var t=!1,n=0;n<$e.length;n+=1){var r=$e[n],a=e[r],o=ct[r];if(!Object(u.isNil)(o)){var i=o.isMandatory,c=o.typeNoDataStatus,l=o.typeNoValueStatus,s=!Object(u.isEmpty)(a);if(!s&&i)return c;var f=!1;if(s){for(var p=0;p<nt.length;p+=1){var d=nt[p],m=a[d];if(Object(u.isEmpty)(m)||Object(u.isNil)(m.value))return l[d]}f=!0}t=t||f}}return t?Object(u.isEmpty)(e[qe.unknown])?it.success:it.unknownEnergyTypeMetersPresent:it.unknown},getStatusInfo:rn("Energy consumption:",lt),getStatusColor:an(st)}),_e(Ee,tn.tariffs,{order:3,title:"Energy Tariffs",dataProp:"tariffs",getStatus:function(e){if(Object(u.isEmpty)(e))return Lt.dataNotAvailable;if(!J(e))return Lt.noTariff;for(var t=0;t<Nt.length;t+=1){var n=Nt[t],r=e[Rt[n]];if(Object(u.isEmpty)(r))return Ct[n]||Lt.unknown}return Lt.success},getStatusInfo:rn("Energy tariffs:",kt),getStatusColor:an(Pt)}),_e(Ee,tn.mugIntegration,{order:4,title:"MUG data",dataProp:"mug_data",getStatus:function(e){if(Object(u.isEmpty)(e))return qt.dataNotAvailable;if(Object(u.isNil)(e.mug_customer_id))return qt.noMugCustomerId;var t=e.mug_sites;if(Object(u.isEmpty)(t))return qt.noMugSites;if(t.find((function(e){return Object(u.isNil)(e.mug_site_id)})))return qt.existSiteWithNullableMUGSiteId;var n=e.mug_meters;return Object(u.isEmpty)(n)?qt.noMugMeters:n.find((function(e){return Object(u.isNil)(e.mug_meter_id)}))?qt.existMeterWithNullableMUGMeterId:e.require_resource_linking?qt.existMeterNotBindedToResource:qt.success},getStatusInfo:rn("MUG data:",$t),getStatusColor:an(en)}),Ee)),cn=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=$("#".concat(e)),r=n.outerHeight();return Object(u.isNil)(r)?t:r},ln=(ze=Object.values(tn),function(e){if(Array.isArray(e))return Pe(e)}(ze)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(ze)||function(e,t){if(e){if("string"==typeof e)return Pe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Pe(e,t):void 0}}(ze)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).sort((function(e,t){return on[e].order-on[t].order})),sn=Object.freeze({eventTime:"eventTime",location:"location",parentLocation:"parentLocation",triggerData:"triggerData"}),un=(Object.values(sn),Object.freeze((_e(De={},sn.eventTime,"event_time"),_e(De,sn.location,"location"),_e(De,sn.triggerData,"trigger_data"),De)),Object.freeze({capitalize:function(e){return Object(u.capitalize)(e)},getValue:function(e){return Object(u.isNil)(e)?Qe.nullable:e}}));Object.freeze((_e(Ne={},sn.eventTime,{name:"Event time",getValue:un.getValue,transformRule:function(e){return Object(u.isNil)(e)?Qe.nA:s()(e).format("D MMM YYYY, HH:mm")}}),_e(Ne,sn.location,{name:"Location",getValue:un.getValue,transformRule:function(e,t){return Object(u.isNil)(t)?e:"".concat(e," (").concat(t,")")}}),_e(Ne,sn.triggerData,{name:"Trigger data",getValue:un.getValue}),Ne));function fn(e){return(fn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function dn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function mn(e,t){return(mn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function gn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=hn(e);if(t){var a=hn(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return bn(this,n)}}function bn(e,t){if(t&&("object"===fn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return yn(e)}function yn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function hn(e){return(hn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function wn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var vn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&mn(e,t)}(c,e);var t,n,o,i=gn(c);function c(){var e;pn(this,c);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return wn(yn(e=i.call.apply(i,[this].concat(n))),"getUpdatedStatus",(function(t){var n=e.props,r=n.actions,a=n.schoolId;r.getUpdatedSmartAppStatus(t).then((function(e){e.success?r.updateSchoolSmartAppStatus(a,e.data):r.showMessageSnackbar("Failed to update app status!",5e3)}))})),e}return t=c,(n=[{key:"render",value:function(){var e=this,t=this.props,n=t.classes,o=t.data,i=o.status,c=o.refresh_token_updated_at,l=o.app_id,f=!Object(u.isNil)(l),p=i===Fe.connected?Ye.success:Ye.alert;return a.a.createElement(m.a,{item:!0,xs:12,container:!0,alignItems:"center",justify:"center",className:n.root},a.a.createElement(m.a,{item:!0,xs:12,container:!0,justify:"center"},a.a.createElement(O.a,{className:n.title},"SmartThings Application")),a.a.createElement(m.a,{item:!0,xs:12,container:!0},f?a.a.createElement(r.Fragment,null,a.a.createElement(m.a,{item:!0,container:!0,md:4,className:n.infoDetailBlock},a.a.createElement(m.a,{item:!0,container:!0,xs:4,alignItems:"center"},a.a.createElement(O.a,{className:n.label},"Status")),a.a.createElement(m.a,{item:!0,container:!0,xs:8,alignItems:"center",justify:"flex-end"},a.a.createElement(O.a,{className:n.value,style:{color:p}},i))),a.a.createElement(m.a,{item:!0,container:!0,md:4,className:n.infoDetailBlock},a.a.createElement(m.a,{item:!0,container:!0,xs:4,alignItems:"center"},a.a.createElement(O.a,{className:n.label},"Updated at")),a.a.createElement(m.a,{item:!0,container:!0,xs:8,alignItems:"center",justify:"flex-end"},a.a.createElement(O.a,{className:n.value},function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"D MMM, YYYY h:mm a",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Qe.question;return Object(u.isNil)(e)?n:s()(e).format(t)}(c)))),a.a.createElement(m.a,{item:!0,container:!0,md:4,className:n.infoDetailBlock},a.a.createElement(j.a,{color:"primary",disabled:!f,className:n.button,variant:"contained",onClick:function(){e.getUpdatedStatus(l)}},a.a.createElement(R.a,{className:n.refreshIcon}),"Refresh info"))):a.a.createElement(m.a,{item:!0,container:!0,xs:12,justify:"center",alignItems:"center"},a.a.createElement(O.a,{className:n.noData,style:{color:Ye.alert}},"No connected smart app!"))))}}])&&dn(t.prototype,n),o&&dn(t,o),Object.defineProperty(t,"prototype",{writable:!1}),c}(r.PureComponent);var jn=Object(i.d)(Object(o.a)((function(e){var t;return{root:{width:"100%",border:"1px solid rgba(0, 0, 0, 0.1)"},title:wn({width:"100%",padding:"8px 16px",fontWeight:500,fontSize:21,textAlign:"center",borderBottom:"1px solid rgba(0, 0, 0, 0.1)"},e.breakpoints.down("xs"),{fontSize:18}),infoDetailBlock:(t={justifyContent:"center",padding:"8px 16px",borderRight:"1px solid rgba(0, 0, 0, 0.1)","&:last-child":{borderRight:"none"}},wn(t,e.breakpoints.down("sm"),{"&:nth-child(2n)":{borderRight:"none"}}),wn(t,e.breakpoints.down("xs"),{borderRight:"none",padding:8}),t),label:{fontSize:16,lineHeight:"normal"},value:{fontSize:16,fontWeight:500,lineHeight:"normal",textAlign:"center"},button:{fontSize:14,textTransform:"none",backgroundColor:"rgb(0, 188, 212)","&:hover":{backgroundColor:"rgb(0, 188, 212)"}},refreshIcon:{marginRight:9,width:16},noData:{fontSize:18,padding:8}}})),Object(c.c)(null,(function(e){return{actions:Object(i.b)({getUpdatedSmartAppStatus:V,updateSchoolSmartAppStatus:Z,showMessageSnackbar:U.showMessageSnackbar},e)}})))(vn);function On(e){return(On="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Mn(){return(Mn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function xn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Sn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function En(e,t){return(En=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Dn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=In(e);if(t){var a=In(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Nn(this,n)}}function Nn(e,t){if(t&&("object"===On(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Cn(e)}function Cn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function In(e){return(In=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Tn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ln=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&En(e,t)}(c,e);var t,n,o,i=Dn(c);function c(){var e;xn(this,c);for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return Tn(Cn(e=i.call.apply(i,[this].concat(n))),"state",{popoverOpen:!1}),Tn(Cn(e),"rootElemRef",Object(r.createRef)()),e}return t=c,(n=[{key:"render",value:function(){var e=this,t=this.props,n=t.classes,r=t.title,o=t.statusColor,i=t.statusInfo,c=t.statusId,l=this.state.popoverOpen;return a.a.createElement(S.a,{rootRef:this.rootElemRef},a.a.createElement(m.a,{item:!0,xs:12,container:!0,alignItems:"center",justify:"center",className:n.root,"aria-owns":l?c:void 0,"aria-haspopup":"true",onMouseEnter:function(t){t.stopPropagation(),e.setState({popoverOpen:!0})},onMouseLeave:function(t){t.stopPropagation(),e.setState({popoverOpen:!1})}},a.a.createElement(O.a,{component:"div",className:n.title,noWrap:!0},r),a.a.createElement("div",{className:n.statusIndicator,style:{backgroundColor:o}}),a.a.createElement(v.a,{id:c,className:n.popover,open:l&&Boolean(i),anchorEl:this.rootElemRef.current,placement:"bottom",transition:!0},(function(e){var t=e.TransitionProps;return a.a.createElement(g.a,Mn({},t,{timeout:{appear:350,enter:250,exit:0}}),a.a.createElement(O.a,{className:n.statusInfoText},i))}))))}}])&&Sn(t.prototype,n),o&&Sn(t,o),Object.defineProperty(t,"prototype",{writable:!1}),c}(r.PureComponent);Ln.defaultProps={statusColor:Ye.unknown,statusInfo:""};var kn=Object(i.d)(Object(o.a)((function(e){return{root:{width:72,marginTop:4,marginBottom:4},title:Tn({width:"100%",marginBottom:8,color:"rgba(0, 0, 0, 0.87)",fontSize:11,textAlign:"center"},e.breakpoints.down("xs"),{fontSize:10}),popover:{borderRadius:10,pointerEvents:"none",marginTop:4,zIndex:1e3,backgroundColor:"rgb(37, 37, 37)",padding:"8px 10px",height:"auto",maxWidth:180,opacity:1},statusIndicator:{width:15,height:15,borderRadius:"50%"},statusInfoText:{fontSize:12,color:"rgba(255, 255, 255, 1)",textAlign:"center"}}})))(Ln),Pn=n("TSYQ"),Rn=n.n(Pn),An=n("ser1"),_n=n("6Gp6"),zn=n("n0BB");function Bn(e){return(Bn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Un(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Wn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Hn(e,t){return(Hn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Yn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Zn(e);if(t){var a=Zn(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Gn(this,n)}}function Gn(e,t){if(t&&("object"===Bn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Vn(e)}function Vn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Zn(e){return(Zn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Qn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Fn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Hn(e,t)}(i,e);var t,n,r,o=Yn(i);function i(){var e;Un(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Qn(Vn(e=o.call.apply(o,[this].concat(n))),"onCopyLinkClick",(function(t){return function(n){var r=e.props.actions;n.stopPropagation(),Object(zn.a)(t,"Copied link to clipboard",r.showMessageSnackbar)}})),Qn(Vn(e),"getExternalUrl",(function(t){var n=e.props.schoolUid,r=window.location.origin;return"".concat(r).concat(t,"/").concat(n,"/")})),Qn(Vn(e),"getActivityStatisticsRowsData",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=e.props.classes,r=_n.e.reduce((function(r,o){var i=_n.f[o];if(i){var c={},l=i.path,f=i.label,p=t.find((function(e){return e.type===o})),d=Object(u.isEmpty)(p)||Object(u.isNil)(p.last_ping)?Qe.nullable:s()(p.last_ping).format("DD-MM-YYYY HH:mm"),m=e.getExternalUrl(l);c["Dashboard version"]=a.a.createElement(O.a,{className:Rn()(n.linkWrapper,n.cellLinkWrapper)},a.a.createElement("a",{className:Rn()(n.link,n.cellLink),href:m,target:"_blank",rel:"noopener noreferrer"},f),a.a.createElement(w.a,{className:n.copyButton,onClick:e.onCopyLinkClick(m)},a.a.createElement(k.a,{className:n.copyIcon}))),c["Last activity*"]=d,r.push(c)}return r}),[]);return r})),e}return t=i,(n=[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.activityStatisticsData;return a.a.createElement(m.a,{item:!0,xs:12,container:!0,alignItems:"center",justify:"center",className:t.root},a.a.createElement(m.a,{item:!0,xs:12,container:!0,justify:"center"},a.a.createElement(O.a,{className:t.title},"Energy Dashboard")),a.a.createElement(m.a,{item:!0,xs:12,container:!0,className:t.activityStatisticsContainer},a.a.createElement(m.a,{item:!0,xs:12,container:!0,className:t.tableWrapper},a.a.createElement(An.a,{classes:{root:t.tableRoot,tableCellHead:t.tableCellHead,tableCellRoot:t.tableCellRoot,emptyTableRow:t.emptyTableRow,emptyRowCellRoot:t.tableEmptyRowCellRoot,paginationToolbar:t.tablePaginationToolbar,paginationSpacer:t.tablePaginationSpacer},rows:this.getActivityStatisticsRowsData(n),showTableHead:!0,paginationColSpan:2}))),a.a.createElement(m.a,{item:!0,xs:12,container:!0,className:t.extraInfoContainer},a.a.createElement(O.a,{className:t.extraInfoItemText},"*Last Activity date is accurate to ",s.a.duration(_n.c,"milliseconds").asMinutes()," mins")))}}])&&Wn(t.prototype,n),r&&Wn(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(r.PureComponent);Fn.defaultProps={activityStatisticsData:[]};var Jn=Object(i.d)(Object(o.a)((function(e){return{root:{width:"100%",border:"1px solid rgba(0, 0, 0, 0.1)"},title:Qn({width:"100%",padding:"8px 16px",fontWeight:500,fontSize:21,textAlign:"center",borderBottom:"1px solid rgba(0, 0, 0, 0.1)"},e.breakpoints.down("xs"),{fontSize:18}),activityStatisticsContainer:{marginTop:16,padding:"0px 16px"},linkWrapper:{fontSize:16,fontWeight:500,lineHeight:"normal",textAlign:"center",position:"relative",width:"100%"},link:{display:"inline-block",padding:4,color:"rgb(13, 180, 225)",fontSize:16},copyButton:Qn({padding:4,marginTop:"-9px","&:hover":{backgroundColor:"transparent"}},e.breakpoints.down("xs"),{marginTop:"-8px"}),copyIcon:Qn({color:"rgb(13, 170, 225)",width:20,height:20},e.breakpoints.down("xs"),{height:18,width:18}),tableWrapper:{overflowX:"auto",overflowY:"hidden"},tableRoot:{minWidth:420,backgroundColor:"transparent",borderRadius:0,boxShadow:"none",marginTop:0,marginBottom:0},tableCellRoot:{borderBottom:"1px solid rgba(224, 224, 224, 0.4)",padding:"6px 16px 4px"},tableCellHead:{borderBottom:"1px solid rgba(224, 224, 224, 0.6)",fontSize:14},emptyTableRow:{height:"auto"},tableEmptyRowCellRoot:{borderBottom:"none",padding:0},tablePaginationToolbar:{minHeight:24,height:"auto",paddingLeft:16},tablePaginationSpacer:Qn({},e.breakpoints.down("sm"),{flexBasis:0,flexGrow:0}),cellLinkWrapper:{width:"auto",display:"inline-block"},cellLink:{fontSize:14,paddingLeft:0},extraInfoContainer:{padding:"8px 16px"},extraInfoItemText:{fontSize:12,padding:"4px 8px"}}})),Object(c.c)(null,(function(e){return{actions:Object(i.b)({showMessageSnackbar:U.showMessageSnackbar},e)}})))(Fn),Kn=n("K+7a"),Xn=n.n(Kn),qn=n("tr08"),$n=n("lopY"),er=n("kfFl"),tr=n("EQI2"),nr=n("yv+Y"),rr=n("wb2y"),ar=n("6u8J"),or=n("ZPUd"),ir=n.n(or);function cr(){return(cr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function lr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function sr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lr(Object(n),!0).forEach((function(t){ur(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ur(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var fr=a.a.createElement(ir.a,null),pr=a.a.createElement(rr.a,null),dr=function(e){var t=e.classes,n=e.isOpened,r=e.title,o=e.titleIcon,i=e.children,c=e.onClose,l=e.fullScreen,s=e.breakpointDownUseFullScreen,f=e.rootDialogProps,p=e.transitionProps,d=Object(qn.a)(),m=(d.breakpoints||[]).keys,g=!Object(u.isNil)(s)&&m.includes(s)?Object($n.a)(d.breakpoints.down(s)):l;return a.a.createElement(er.a,cr({fullScreen:g,fullWidth:!0,maxWidth:"md",open:n,onClose:c,"aria-labelledby":"content-wrapper-dialog-title",classes:{paper:t.rootPaper},TransitionComponent:ar.a,TransitionProps:sr({direction:"up",mountOnEnter:!0,unmountOnExit:!0,timeout:500},p)},f),a.a.createElement(nr.a,{id:"content-wrapper-dialog-title",className:t.titleRoot,disableTypography:!0},a.a.createElement("div",{className:t.titleBlock},o&&a.a.createElement("img",{src:o,alt:"resource",className:t.titleIcon}),a.a.createElement(O.a,{variant:"h6",className:t.dialogTitle},r),a.a.createElement(w.a,{color:"inherit",onClick:c,"aria-label":"Close"},fr)),pr),a.a.createElement(tr.a,{className:t.dialogContent},i))};dr.defaultProps={title:"",titleIcon:"",rootDialogProps:{},transitionProps:{},fullScreen:!1,breakpointDownUseFullScreen:null,children:null};var mr=Object(o.a)((function(e){return{rootPaper:{},titleRoot:{padding:0},iconButton:{width:e.spacing(4),height:e.spacing(4),marginBottom:e.spacing(1)},dialogTitle:{fontSize:18,color:"#555",fontWeight:"normal",margin:"28px auto",textAlign:"center"},dialogContent:{padding:0},titleBlock:{display:"flex",alignItems:"center",paddingLeft:15},titleIcon:{width:30,height:35}}}))(dr),gr=n("PC3U"),br=n("SAJy"),yr=n("7frF"),hr=n.n(yr),wr=n("CRf/"),vr=n.n(wr),jr=n("hoSD"),Or=n.n(jr),Mr=n("Kyd3"),xr=n("VtWn");function Sr(e){return(Sr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Er(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Dr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Er(Object(n),!0).forEach((function(t){Rr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Er(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Nr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Cr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ir(e,t){return(Ir=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Tr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Pr(e);if(t){var a=Pr(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Lr(this,n)}}function Lr(e,t){if(t&&("object"===Sr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return kr(e)}function kr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Pr(e){return(Pr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Rr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ar={meterId:"",liveMeterId:"",tariffId:"",meterName:"",login:"",password:"",isHalfHourMeter:!0,isPasswordHidden:!0},_r=a.a.createElement(vr.a,null),zr=a.a.createElement(hr.a,null),Br=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ir(e,t)}(i,e);var t,n,r,o=Tr(i);function i(){var e;Nr(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Rr(kr(e=o.call.apply(o,[this].concat(n))),"state",Dr({},Ar)),Rr(kr(e),"newHildebrandMeterForm",null),Rr(kr(e),"onFormSubmit",(function(){var t=e.props.onSubmit,n=e.state,r=n.meterId,a=n.liveMeterId,o=n.tariffId,i=n.meterName,c=n.login,l=n.password,s=n.isHalfHourMeter;t({id:r,tariffId:o,name:i,credentials:{login:c,password:l},isHalfHourMeter:s,liveMeterId:s?a:""})})),Rr(kr(e),"getNewMeterDelay",(function(e){return Math.max(Math.min(parseInt(e.target.value,10),1440),0)})),e}return t=i,(n=[{key:"componentDidMount",value:function(){var e=this.props.meter;if(e){var t=e.meterId,n=e.name,r=e.isHalfHourMeter,a=e.liveMeterId;this.setState(Dr(Dr({},Ar),{},{isHalfHourMeter:r,meterId:t,liveMeterId:a||"",meterName:n}))}else this.setState(Dr({},Ar))}},{key:"render",value:function(){var e=this,t=this.props,n=t.classes,r=t.isOpened,o=t.onClose,i=t.providerExists,c=t.title,l=t.submitLabel,s=t.meter,u=this.state,f=u.meterId,p=u.liveMeterId,d=u.tariffId,g=u.meterName,b=u.login,y=u.password,h=u.isHalfHourMeter,v=u.isPasswordHidden,j=s||{isHalfHourMeter:h},O=j.isHalfHourMeter,M=j.meterId;return a.a.createElement(Mr.a,{classes:{dialogContent:n.dialogContent},isOpened:r,onClose:o,title:c,onSubmit:function(){return e.newHildebrandMeterForm.submit()},submitLabel:l},a.a.createElement(br.ValidatorForm,{ref:function(t){e.newHildebrandMeterForm=t},onSubmit:this.onFormSubmit},a.a.createElement(m.a,{container:!0,direction:"column",style:{padding:"0 20px"}},a.a.createElement(xr.a,{row:!0,name:"isHalfHourMeter",groupLabel:"Type *",value:h,customLabelMap:{yes:"30 minutes readings",no:"1 minute readings"},onSubmit:function(t){e.setState({isHalfHourMeter:t})}}),(!s||f!==M||h!==O)&&a.a.createElement(Or.a,{className:n.warningMessage},"It may take some time to retrieve historical data for the meter"),a.a.createElement(br.TextValidator,{type:"text",label:"Meter name *",name:"meterName",value:g,onChange:function(t){e.setState({meterName:t.target.value})},validators:["required"],errorMessages:["This field is required"]}),a.a.createElement(br.TextValidator,{type:"text",label:"Meter id *",name:"meterId",value:f,onChange:function(t){e.setState({meterId:t.target.value})},validators:["required"],errorMessages:["This field is required"]}),h&&a.a.createElement(br.TextValidator,{type:"text",label:"Live Meter id",name:"liveMeterId",value:p,onChange:function(t){e.setState({liveMeterId:t.target.value})}}),a.a.createElement(br.TextValidator,{type:"text",label:"Tariff id",name:"tariffId",value:d,onChange:function(t){e.setState({tariffId:t.target.value})}}),!i&&a.a.createElement(a.a.Fragment,null,a.a.createElement(br.TextValidator,{type:"text",label:"Login *",name:"login_field",value:b,onChange:function(t){e.setState({login:t.target.value})},validators:["required"],errorMessages:["This field is required"]}),a.a.createElement("div",{style:{position:"relative"}},a.a.createElement(br.TextValidator,{type:v?"password":"text",label:"Password *",name:"password_field",value:y,onChange:function(t){e.setState({password:t.target.value})},validators:["required"],errorMessages:["This field is required"],style:{width:"100%"}}),a.a.createElement(w.a,{style:{position:"absolute",top:15,right:5,padding:5},onClick:function(){e.setState({isPasswordHidden:!v})}},v?_r:zr))))))}}])&&Cr(t.prototype,n),r&&Cr(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(a.a.Component);Br.defaultProps={meter:null};var Ur=Object(o.a)((function(e){return{rootPaper:{},titleRoot:{padding:0},iconButton:{width:e.spacing(4),height:e.spacing(4),marginBottom:e.spacing(1)},dialogTitle:{fontSize:18,color:"#555",fontWeight:"normal",margin:"28px auto",textAlign:"center"},dialogContent:{padding:0},titleBlock:{display:"flex",alignItems:"center",paddingLeft:15},titleIcon:{width:30,height:35},warningMessage:{fontSize:"12px",color:"#ffbf00",marginBottom:10}}}))(Br),Wr=n("SN3g"),Hr=n.n(Wr),Yr=n("NHF4"),Gr=n.n(Yr),Vr=n("wUID");function Zr(e){return(Zr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Fr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qr(Object(n),!0).forEach((function(t){na(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Jr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Kr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Xr(e,t){return(Xr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function qr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ta(e);if(t){var a=ta(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return $r(this,n)}}function $r(e,t){if(t&&("object"===Zr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ea(e)}function ea(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ta(e){return(ta=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function na(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ra=a.a.createElement("h3",null,"Hildebrand meters"),aa=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Xr(e,t)}(c,e);var t,n,o,i=qr(c);function c(){var e;Jr(this,c);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return na(ea(e=i.call.apply(i,[this].concat(n))),"state",{detailsDialogOpened:!1,newMeterDialogOpened:!1,details:null,meterToDelete:null,meterToEdit:null}),na(ea(e),"onAction",(function(t,n,r){switch(t){case jt.showNotOnlineMetersList:if(Object(u.isEmpty)(r))return;e.setState({details:{key:t,resourceType:n,data:r}},(function(){e.toggleDetailsDialog()}))}})),na(ea(e),"getRowsDataItemActions",(function(t,n){var r=e.props.classes;return Ot.reduce((function(o,i){var c=Mt[i];if(c){var l=c.name,s=c.label,u=c.key,f=(0,c.getActionIsDisabled)(t,n);o[l]=a.a.createElement(j.a,{disabled:f,className:r.actionButton,onClick:function(){e.onAction(u,t,n)}},f?Qe.nullable:s)}return o}),{})})),na(ea(e),"getTableRowsData",(function(t){return bt.map((function(n){var r=t[n],a=wt.reduce((function(e,t){var a=vt[t];if(a){var o=a.name,i=a.getValue;e[o]=i(n,r)}return e}),{}),o=e.getRowsDataItemActions(n,r);return Fr(Fr({},a),o)}))})),na(ea(e),"getHildebrandTableRowsData",(function(t){return t.filter((function(e){return!e.hh_values_meter})).map((function(n){var r=e.props,o=r.classes,i=r.actions,c=r.refreshSchoolInfo,l=n.name,s=n.is_half_hour_meter,u=n.minutes_delay,f=n.resource_ptr,p=n.meter_id,d=n.live_values_meter__pk,g=n.live_values_meter__meter_id,b=d?t.find((function(e){return e.resource_ptr===d})).minutes_delay:u,y="--";switch(b){case null:case void 0:y="yesterday";break;case 0:break;default:y="".concat(b," minutes ago")}return{Id:d?"".concat(f," (").concat(d,")"):f,Name:l,"Last data":y,Actions:a.a.createElement(m.a,{container:!0,alignItems:"center"},a.a.createElement(w.a,{className:o.editMeterContainer,onClick:function(){return e.setState({meterToEdit:{id:f,meterId:p,name:l,isHalfHourMeter:s,minutesDelay:u,liveMeterId:g}})}},a.a.createElement("img",{src:Gr.a,alt:"edit current sensor",className:o.actionIcon})),a.a.createElement(w.a,{className:o.refreshMeterContainer,onClick:function(){return i.refreshMeter(f).then((function(){return setTimeout(c,0)}))}},a.a.createElement(Xn.a,{style:{height:20,width:20}})),a.a.createElement(w.a,{className:o.deleteMeterContainer,onClick:function(){return e.setState({meterToDelete:{id:f,name:l,liveMeterPk:d}})}},a.a.createElement("img",{src:Hr.a,alt:"delete current sensor",className:o.actionIcon})))}}))})),na(ea(e),"toggleDetailsDialog",(function(){e.setState((function(e){return{detailsDialogOpened:!e.detailsDialogOpened}}))})),na(ea(e),"renderDetailsData",(function(){var t=e.props.classes,n=e.state.details;if(Object(u.isEmpty)(n))return null;var r=n.key,o=n.data,i=n.resourceType;switch(r){case jt.showNotOnlineMetersList:if(Object(u.isNil)(o))return null;var c=o.not_online||[];return a.a.createElement("div",null,a.a.createElement(m.a,{container:!0,justify:"center"},a.a.createElement(O.a,{align:"center",className:t.metersListHeader},yt[i]," disconnected meters list")),a.a.createElement(m.a,{container:!0},a.a.createElement(b.a,{component:"ol",classes:{root:t.metersListRoot}},c.map((function(e){return a.a.createElement(M.a,{key:e,style:{display:"list-item"},disableGutters:!0},a.a.createElement(x.a,{classes:{primary:t.metersListItemTextPrimary}},e))})))));default:return null}})),e}return t=c,(n=[{key:"render",value:function(){var e=this,t=this.props,n=t.actions,o=t.classes,i=t.data,c=t.schoolId,l=t.refreshSchoolInfo,s=this.state,u=s.detailsDialogOpened,f=s.newMeterDialogOpened,p=s.meterToDelete,d=s.meterToEdit;if(!i)return null;var g=i.hildebrand,b=g.meters,y=g.provider_exists;return a.a.createElement(m.a,{item:!0,xs:12,container:!0,alignItems:"center",justify:"center",className:o.root},a.a.createElement(m.a,{item:!0,xs:12,container:!0,justify:"center"},a.a.createElement(O.a,{className:o.title},"Energy Meters")),a.a.createElement(m.a,{item:!0,xs:12,container:!0,className:o.contentContainer},J(i)?a.a.createElement(r.Fragment,null,a.a.createElement(m.a,{item:!0,xs:12,container:!0,className:o.tableWrapper},a.a.createElement(An.a,{classes:{root:o.tableRoot,tableCellRoot:o.tableCellRoot,emptyTableRow:o.emptyTableRow,emptyRowCellRoot:o.tableEmptyRowCellRoot,paginationToolbar:o.tablePaginationToolbar,paginationSpacer:o.tablePaginationSpacer},rows:this.getTableRowsData(i),showTableHead:!0,paginationColSpan:wt.length})),a.a.createElement(m.a,{container:!0,item:!0,xs:12,className:o.extraInfoContainer},a.a.createElement(O.a,{className:o.extraInfoItemText},"*includes meters with offline and unknown statuses for SmartThings energy meters")),a.a.createElement(m.a,{container:!0,item:!0,xs:12,justify:"center",className:o.extraInfoContainer},ra),b&&b.length?a.a.createElement(m.a,{item:!0,xs:12,container:!0,className:o.tableWrapper},a.a.createElement(An.a,{classes:{root:o.tableRoot,tableCellRoot:o.tableCellRoot,emptyTableRow:o.emptyTableRow,emptyRowCellRoot:o.tableEmptyRowCellRoot,paginationToolbar:o.tablePaginationToolbar,paginationSpacer:o.tablePaginationSpacer},rows:this.getHildebrandTableRowsData(b),showTableHead:!0,paginationColSpan:wt.length})):a.a.createElement(m.a,{container:!0,justify:"center"},a.a.createElement(O.a,{className:o.noData},"No hildebrand meter!")),a.a.createElement(m.a,{container:!0,item:!0,xs:12,justify:"flex-end",className:o.extraInfoContainer},a.a.createElement(j.a,{color:"primary",className:o.button,variant:"contained",onClick:function(){e.setState({newMeterDialogOpened:!0})}},"Create Hildebrand meter")),a.a.createElement(mr,{title:"Details",isOpened:u,breakpointDownUseFullScreen:"sm",classes:{dialogTitle:o.detailsDialogTitle},onClose:this.toggleDetailsDialog},this.renderDetailsData())):a.a.createElement(m.a,{item:!0,container:!0,xs:12,justify:"center",alignItems:"center"},a.a.createElement(O.a,{className:o.noData},"No energy meter!"),a.a.createElement(m.a,{container:!0,item:!0,xs:12,justify:"flex-end",alignItems:"center",className:o.extraInfoContainer},a.a.createElement(j.a,{color:"primary",className:o.button,variant:"contained",onClick:function(){e.setState({newMeterDialogOpened:!0})}},"Create Hildebrand meter"))),f&&a.a.createElement(Ur,{title:"Create New Hildebrand meter",submitLabel:"Create",providerExists:y,isOpened:f,onClose:function(){e.setState({newMeterDialogOpened:!1})},onSubmit:function(t){n.createHildebrandMeter(Fr(Fr({},t),{},{schoolId:c})).then((function(t){t&&(e.setState({newMeterDialogOpened:!1}),setTimeout(l,0))}))}}),d&&a.a.createElement(Ur,{title:"Edit Hildebrand meter",submitLabel:"Submit",meter:d,providerExists:y,isOpened:!!d,onClose:function(){e.setState({meterToEdit:null})},onSubmit:function(t){n.editHildebrandMeter(Fr(Fr({},t),{},{schoolId:c}),d.id).then((function(t){t&&(e.setState({meterToEdit:null}),setTimeout(l,0))}))}}),p&&a.a.createElement(Vr.a,{title:"Would you like delete '".concat(p.name,"' ?"),isOpened:!!p,onSubmit:function(){n.deleteMeter(p.id,!0).then((function(){return p.liveMeterPk&&n.deleteMeter(p.liveMeterPk,!0)})).then((function(){e.setState({meterToDelete:null}),setTimeout(l,0)}))},onClose:function(){e.setState({meterToDelete:null})}})))}}])&&Kr(t.prototype,n),o&&Kr(t,o),Object.defineProperty(t,"prototype",{writable:!1}),c}(r.PureComponent);var oa=Object(i.d)(Object(o.a)((function(e){return{root:{width:"100%",border:"1px solid rgba(0, 0, 0, 0.1)"},title:na({width:"100%",padding:"8px 16px",fontWeight:500,fontSize:21,textAlign:"center",borderBottom:"1px solid rgba(0, 0, 0, 0.1)"},e.breakpoints.down("xs"),{fontSize:18}),contentContainer:{padding:"8px 16px"},tableWrapper:{marginBottom:4},tableTitle:na({width:"100%",fontSize:18,fontWeight:500,textAlign:"center"},e.breakpoints.down("xs"),{fontSize:16}),tableRoot:{backgroundColor:"transparent",borderRadius:0,boxShadow:"none",marginTop:8,marginBottom:8},tableCellRoot:{borderBottom:"1px solid rgba(224, 224, 224, 0.4)"},emptyTableRow:{height:"auto"},tableEmptyRowCellRoot:{borderBottom:"none",padding:0},tablePaginationToolbar:{minHeight:24,height:"auto",paddingLeft:16},tablePaginationSpacer:na({},e.breakpoints.down("sm"),{flexBasis:0,flexGrow:0}),detailsDialogTitle:na({padding:"0px 24px",margin:"16px auto",fontWeight:500},e.breakpoints.down("xs"),{margin:"12px auto",padding:"0px 12px"}),actionButton:{fontSize:14,color:"rgb(13, 180, 225)",textTransform:"none",backgroundColor:"transparent","&:hover":{backgroundColor:"transparent"}},button:{fontSize:14,textTransform:"none",backgroundColor:"rgb(0, 188, 212)","&:hover":{backgroundColor:"rgb(0, 188, 212)"}},metersListHeader:na({fontSize:16,fontWeight:500,padding:16},e.breakpoints.down("xs"),{padding:8}),metersListRoot:{listStyleType:"decimal",paddingTop:0,paddingLeft:40,paddingRight:8},metersListItemTextPrimary:{fontSize:14,padding:8},noData:{fontSize:18,color:Ye.alert},extraInfoItemText:{fontSize:12,padding:"4px 8px"},editMeterContainer:{width:11,height:11,backgroundColor:"#eba117",margin:"0px 4px 2px 2px"},refreshMeterContainer:{width:11,height:11,color:"white",backgroundColor:"#3dbdd5",margin:"0px 4px 2px 2px"},deleteMeterContainer:{width:11,height:11,backgroundColor:"#CD5C5C",margin:"0px 0px 2px 2px"},actionIcon:{width:11,height:11}}})),Object(c.c)(null,(function(e){return{actions:Object(i.b)({createHildebrandMeter:Q,editHildebrandMeter:F,refreshMeter:gr.refreshMeter,deleteMeter:gr.deleteMeter},e)}})))(aa);var ia=function(e){var t=e.classes,n=e.text;return a.a.createElement(m.a,{item:!0,xs:12,container:!0,alignItems:"center",justify:"center",className:t.root},a.a.createElement(O.a,{className:t.text},n))};ia.defaultProps={text:"No data!"};var ca=Object(i.d)(Object(o.a)((function(e){return{root:{width:"100%",height:250},text:(t={color:"rgb(238, 129, 118)",letterSpacing:2,fontSize:32,textAlign:"center"},n=e.breakpoints.down("xs"),r={fontSize:24},n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t)};var t,n,r})))(ia),la=n("pwYJ"),sa=n.n(la);function ua(e){return(ua="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fa(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pa(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function da(e,t){return(da=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ma(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ya(e);if(t){var a=ya(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ga(this,n)}}function ga(e,t){if(t&&("object"===ua(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ba(e)}function ba(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ya(e){return(ya=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ha(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var wa=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&da(e,t)}(c,e);var t,n,o,i=ma(c);function c(){var e;fa(this,c);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return ha(ba(e=i.call.apply(i,[this].concat(n))),"state",{detailsDialogOpened:!1}),ha(ba(e),"toggleDetailsDataDialog",(function(){e.setState((function(e){return{detailsDialogOpened:!e.detailsDialogOpened}}))})),e}return t=c,(n=[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.data,o=e.meters,i=e.history,c=e.schoolUid;if(Object(u.isEmpty)(n))return null;var l=o&&o.hildebrand&&o.energy_meters&&o.hildebrand.meters&&o.hildebrand.meters.length&&o.hildebrand.meters.length===o.energy_meters.total,s=l&&o.hildebrand.meters.every((function(e){return e.is_half_hour_meter&&!e.live_values_meter})),f=l&&o.hildebrand.meters.every((function(e){return e.is_half_hour_meter||e.hh_values_meter}));return a.a.createElement(m.a,{item:!0,xs:12,container:!0,alignItems:"center",justify:"center",className:t.root},a.a.createElement(m.a,{item:!0,xs:12,container:!0,justify:"center"},a.a.createElement(O.a,{className:t.title},"Energy Consumption")),a.a.createElement(m.a,{item:!0,xs:12,container:!0,className:t.detailsContainer},$e.map((function(e){var o=n[e],i=!Object(u.isEmpty)(o),c=ot[e]||at,l=c.color,p=c.icon,d=c.showOnDataUnavailable;return i||d?a.a.createElement(m.a,{key:e,item:!0,container:!0,xs:12,md:6,justify:"center"},a.a.createElement(m.a,{item:!0,container:!0,xs:10,sm:6,md:7,lg:8,xl:7,className:t.energyTypeWidget},a.a.createElement(m.a,{item:!0,container:!0,xs:12},a.a.createElement(O.a,{className:t.energyTypeTitle,style:{color:l}},p&&a.a.createElement("img",{alt:"icon",src:p,className:t.avatar}),a.a.createElement("span",{className:t.energyTypeTitleText},et[e]))),a.a.createElement(m.a,{item:!0,container:!0,xs:12,justify:"center",alignItems:"center"},i?a.a.createElement(r.Fragment,null,nt.filter((function(t){return!(t===tt.yesterday&&(e!==qe.electricity||!f)||s&&t!==tt.yesterday||t===tt.today&&f)})).map((function(e,n,i){var c=o[e]||{},l=c.value,s=c.unit,f=!Object(u.isNil)(l),p=f?Object(u.round)(l,2):Qe.nA,d=f&&z.X[s]||"",g=!(n%2)&&i.length>1;return a.a.createElement(r.Fragment,{key:e},a.a.createElement(m.a,{item:!0,container:!0,xs:!g||6,className:t.consumptionTypeContainer},a.a.createElement(m.a,{item:!0,container:!0,xs:11,className:t.consumptionWidget},a.a.createElement(O.a,{className:t.consumptionTypeTitle,noWrap:!0},rt[e]),a.a.createElement(O.a,{className:t.valueUnitBlock,noWrap:!0},a.a.createElement("span",{className:t.value},p),d&&a.a.createElement("span",{className:t.unit},d)))),g&&a.a.createElement(m.a,{className:t.divider}))}))):a.a.createElement(ca,{text:"No ".concat((et[e]||"").toLowerCase()," meter!"),classes:{root:t.noDataRoot,text:t.noDataText}})))):null})),J(n)&&a.a.createElement(m.a,{item:!0,container:!0,className:t.buttonContainer},a.a.createElement(j.a,{color:"primary",variant:"contained",className:t.button,onClick:function(){return i.push("/energy-usage/".concat(c))}},a.a.createElement("img",{src:sa.a,alt:"chart",className:t.buttonIcon}),"Details"))))}}])&&pa(t.prototype,n),o&&pa(t,o),Object.defineProperty(t,"prototype",{writable:!1}),c}(r.PureComponent),va=Object(o.a)((function(e){var t;return{root:{width:"100%",border:"1px solid rgba(0, 0, 0, 0.1)"},title:ha({width:"100%",padding:"8px 16px",fontWeight:500,fontSize:21,textAlign:"center"},e.breakpoints.down("xs"),{fontSize:18}),avatar:{display:"inline-block",marginRight:2,height:18,width:18,verticalAlign:"middle"},detailsContainer:ha({borderTop:"1px solid rgba(0, 0, 0, 0.05)",borderBottom:"1px solid rgba(0, 0, 0, 0.05)",justifyContent:"center"},e.breakpoints.down("sm"),{borderBottom:"none"}),energyTypeWidget:{borderRadius:13,border:"2px solid rgba(0, 0, 0, 0.08)",marginTop:8,marginBottom:8},energyTypeTitle:{width:"100%",padding:"8px 16px",fontWeight:500,fontSize:18,textAlign:"center"},energyTypeTitleText:{display:"inline-block",verticalAlign:"middle"},consumptionTypeContainer:{justifyContent:"center",marginBottom:4},consumptionTypeTitle:{width:"100%",fontSize:16,textAlign:"center",marginBottom:8},consumptionWidget:{marginBottom:4,alignContent:"center"},valueUnitBlock:{width:"100%",lineHeight:"normal",textAlign:"center"},value:ha({display:"inline-block",fontSize:16,fontWeight:500},e.breakpoints.up("xl"),{fontSize:18}),unit:{display:"inline-block",fontSize:12,marginLeft:4},divider:{width:1,height:"50%",backgroundColor:"rgba(0, 0, 0, 0.15)",alignSelf:"center"},buttonContainer:(t={padding:12,justifyContent:"center"},ha(t,e.breakpoints.down("sm"),{marginBottom:8}),ha(t,e.breakpoints.down("xs"),{padding:8}),t),button:{fontSize:14,textTransform:"none",backgroundColor:"rgb(0, 188, 212)","&:hover":{backgroundColor:"rgb(0, 188, 212)"}},buttonIcon:{width:16,height:23,marginRight:5},detailsDialogTitle:ha({padding:"0px 24px",margin:"16px auto",fontWeight:500},e.breakpoints.down("xs"),{margin:"12px auto",padding:"0px 12px"}),noDataRoot:{height:60},noDataText:ha({fontSize:18,color:Ye.alert,letterSpacing:1},e.breakpoints.down("xs"),{letterSpacing:"normal"})}}))(wa);function ja(e){return(ja="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Oa(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ma(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xa(e,t){return(xa=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Sa(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Na(e);if(t){var a=Na(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Ea(this,n)}}function Ea(e,t){if(t&&("object"===ja(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Da(e)}function Da(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Na(e){return(Na=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ca(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ia=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&xa(e,t)}(i,e);var t,n,r,o=Sa(i);function i(){var e;Oa(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Ca(Da(e=o.call.apply(o,[this].concat(n))),"getTariffsRowsData",(function(e){return e.map((function(e){return _t.reduce((function(t,n){var r=Ht[n];if(r){var a=r.name,o=r.getValue;t[a]=o(e[zt[n]])}return t}),{})}))})),Ca(Da(e),"handleExpandClick",(function(){e.setState((function(e){return{expanded:!e.expanded}}))})),e}return t=i,(n=[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.tariffs,r=Array.isArray(n)&&n.length>0;return a.a.createElement(m.a,{item:!0,container:!0,xs:12,className:t.root},a.a.createElement(m.a,{item:!0,xs:12,container:!0},r?a.a.createElement(An.a,{classes:{root:t.tableRoot,tableCellRoot:t.tableCellRoot,emptyTableRow:t.emptyTableRow,emptyRowCellRoot:t.tableEmptyRowCellRoot,paginationToolbar:t.tablePaginationToolbar,paginationSpacer:t.tablePaginationSpacer},rows:this.getTariffsRowsData(n),showTableHead:!0,paginationColSpan:_t.length}):a.a.createElement(m.a,{item:!0,container:!0,xs:12,justify:"center",alignItems:"center"},a.a.createElement(O.a,{className:Rn()(t.noData,t.alertText)},"No tariff!"))))}}])&&Ma(t.prototype,n),r&&Ma(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(r.PureComponent);Ia.defaultProps={tariffs:[]};var Ta=Object(i.d)(Object(o.a)((function(e){return{root:{},titleContainer:{},title:{position:"relative"},tableRoot:{backgroundColor:"transparent",borderRadius:0,boxShadow:"none",marginTop:8,marginBottom:8},tableCellRoot:{borderBottom:"1px solid rgba(224, 224, 224, 0.4)"},emptyTableRow:{height:"auto"},tableEmptyRowCellRoot:{borderBottom:"none",padding:0},tablePaginationToolbar:{minHeight:24,height:"auto",paddingLeft:16},tablePaginationSpacer:Ca({},e.breakpoints.down("sm"),{flexBasis:0,flexGrow:0}),expand:{position:"absolute",right:0,top:-8,transform:"rotate(0deg)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest}),padding:8},expandOpen:{transform:"rotate(180deg)"},count:{},noData:{fontSize:18,padding:"4px 8px"},alertText:{color:Ye.alert}}})))(Ia);var La=Object(i.d)(Object(o.a)((function(e){return{root:{width:"100%",border:"1px solid rgba(0, 0, 0, 0.1)"},title:(t={width:"100%",padding:"8px 16px",fontWeight:500,fontSize:21,textAlign:"center",borderBottom:"1px solid rgba(0, 0, 0, 0.1)"},n=e.breakpoints.down("xs"),r={fontSize:18},n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t),contentContainer:{padding:8},tableWrapper:{marginBottom:12,"&:last-child":{marginBottom:0}},noData:{fontSize:18,color:Ye.alert}};var t,n,r})))((function(e){var t=e.classes,n=e.tariffs,r=J(n);return a.a.createElement(m.a,{item:!0,xs:12,container:!0,alignItems:"center",justify:"center",className:t.root},a.a.createElement(m.a,{item:!0,xs:12,container:!0,justify:"center"},a.a.createElement(O.a,{className:t.title},"Energy Tariffs")),a.a.createElement(m.a,{item:!0,xs:12,container:!0,className:t.contentContainer},r?a.a.createElement(m.a,{item:!0,xs:12,container:!0,className:t.tableWrapper},a.a.createElement(Ta,{tariffs:n[Rt[Dt.normal]]||[]})):a.a.createElement(m.a,{item:!0,container:!0,xs:12,justify:"center",alignItems:"center"},a.a.createElement(O.a,{className:t.noData},"No tariff!"))))})),ka=n("27Dn"),Pa=n.n(ka),Ra=n("bWLx"),Aa=n("K/1S"),_a=n("iUGO"),za=n.n(_a),Ba=n("Dpg8"),Ua=n.n(Ba),Wa=n("5rCv"),Ha=n.n(Wa),Ya=n("76vg"),Ga=n.n(Ya),Va=n("E2gh"),Za=n.n(Va),Qa=n("ytJY"),Fa=n.n(Qa),Ja=n("FfST"),Ka=n.n(Ja),Xa=n("MPUk"),qa=n.n(Xa),$a=n("Vgje"),eo=n.n($a),to=n("/z3n"),no=n.n(to),ro=n("RJ8S"),ao=n.n(ro),oo=n("8Gle"),io=n.n(oo),co=n("dMKM"),lo=n.n(co),so=n("bSwy"),uo=n.n(so),fo=n("KpIH"),po=n.n(fo);function mo(){return(mo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var go=Object.freeze({Add:Object(r.forwardRef)((function(e,t){return a.a.createElement(za.a,mo({},e,{ref:t}))})),Check:Object(r.forwardRef)((function(e,t){return a.a.createElement(Ha.a,mo({},e,{ref:t}))})),Clear:Object(r.forwardRef)((function(e,t){return a.a.createElement(Fa.a,mo({},e,{ref:t}))})),Delete:Object(r.forwardRef)((function(e,t){return a.a.createElement(Ka.a,mo({},e,{ref:t}))})),DetailPanel:Object(r.forwardRef)((function(e,t){return a.a.createElement(Za.a,mo({},e,{ref:t}))})),Edit:Object(r.forwardRef)((function(e,t){return a.a.createElement(qa.a,mo({},e,{ref:t}))})),Export:Object(r.forwardRef)((function(e,t){return a.a.createElement(lo.a,mo({},e,{ref:t}))})),Filter:Object(r.forwardRef)((function(e,t){return a.a.createElement(eo.a,mo({},e,{ref:t}))})),FirstPage:Object(r.forwardRef)((function(e,t){return a.a.createElement(no.a,mo({},e,{ref:t}))})),LastPage:Object(r.forwardRef)((function(e,t){return a.a.createElement(ao.a,mo({},e,{ref:t}))})),NextPage:Object(r.forwardRef)((function(e,t){return a.a.createElement(Za.a,mo({},e,{ref:t}))})),PreviousPage:Object(r.forwardRef)((function(e,t){return a.a.createElement(Ga.a,mo({},e,{ref:t}))})),ResetSearch:Object(r.forwardRef)((function(e,t){return a.a.createElement(Fa.a,mo({},e,{ref:t}))})),Search:Object(r.forwardRef)((function(e,t){return a.a.createElement(uo.a,mo({},e,{ref:t}))})),SortArrow:Object(r.forwardRef)((function(e,t){return a.a.createElement(Ua.a,mo({},e,{ref:t}))})),ThirdStateCheck:Object(r.forwardRef)((function(e,t){return a.a.createElement(io.a,mo({},e,{ref:t}))})),ViewColumn:Object(r.forwardRef)((function(e,t){return a.a.createElement(po.a,mo({},e,{ref:t}))}))}),bo=Object(Aa.a)({typography:{fontFamily:["Roboto",'"Helvetica Neue"',"Arial","sans-serif"].join(",")},overrides:{MuiPaper:{root:{borderRadius:"8px !important",boxShadow:"none !important","@media (max-width: 600px)":{borderRadius:"0px !important"}}},MuiTableRow:{root:{"&:nth-child(2n)":{backgroundColor:"rgb(252, 252, 252)"}}},MuiTableSortLabel:{root:{color:"rgba(0, 0, 0, 0.54) !important","&:hover":{color:"rgba(0, 0, 0, 0.54) !important"}},icon:{color:"rgba(0, 0, 0, 0.54) !important","&:hover":{color:"rgba(0, 0, 0, 0.54) !important"}},active:{color:"rgba(0, 0, 0, 0.54) !important","&:hover":{color:"rgba(0, 0, 0, 0.54) !important"}}},MuiTableCell:{head:{fontSize:14},root:{borderBottom:"1px solid rgba(224, 224, 224, 0.4)"}},MuiInput:{underline:{"&:hover:before":{borderBottom:"1px solid rgba(0, 0, 0, 0.42) !important"},"&:after":{borderBottom:"none !important"}}}}});function yo(e){return(yo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ho(){return(ho=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function wo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function vo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wo(Object(n),!0).forEach((function(t){No(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function jo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Oo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Mo(e,t){return(Mo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function xo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Do(e);if(t){var a=Do(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return So(this,n)}}function So(e,t){if(t&&("object"===yo(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Eo(e)}function Eo(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Do(e){return(Do=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function No(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Co=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Mo(e,t)}(i,e);var t,n,r,o=xo(i);function i(){var e;jo(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return No(Eo(e=o.call.apply(o,[this].concat(n))),"getDataTablePropsFromData",(function(t){var n=e.props.dataPropsToDisplayConfig;if(Object(u.isEmpty)(n))return null;var r=n.propsList,a=n.propsConfigDict;return{columns:r.map((function(e){return{field:e,title:a[e].label,sorting:a[e].sorting||!1}})),data:t.map((function(e){return vo(vo({},r.reduce((function(t,n){var r=a[n];if(r){var o=r.transformRule,i=e[n];t[n]=Object(u.isNil)(o)?Object(u.isNil)(i)?Qe.nullable:i:o(i)}return t}),{})),{},{originData:e})}))}})),e}return t=i,(n=[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.data,r=e.title;return a.a.createElement(Ra.a,{theme:bo},a.a.createElement(m.a,{item:!0,xs:12,container:!0,alignItems:"center",justify:"center",className:t.root},a.a.createElement(m.a,{item:!0,container:!0,justify:"center"},a.a.createElement(Pa.a,ho({},this.getDataTablePropsFromData(n),{title:r,icons:go,components:{Toolbar:function(e){return a.a.createElement(ka.MTableToolbar,ho({},e,{classes:{root:t.tableTitleRoot,title:t.tableTitle}}))}},options:{headerStyle:{color:"rgba(0, 0, 0, 0.54)",fontWeight:700},pageSize:n.length<=5?5:10,emptyRowsWhenPaging:!1},style:{width:"100%"}})))))}}])&&Oo(t.prototype,n),r&&Oo(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(r.PureComponent);Co.defaultProps={title:""};var Io=Object(o.a)((function(e){var t,n,r,a;return{root:{width:"100%",border:"1px solid rgba(0, 0, 0, 0.1)"},title:No({width:"100%",padding:"8px 16px",fontWeight:500,fontSize:21,textAlign:"center"},e.breakpoints.down("xs"),{fontSize:18}),detailsContainer:No({borderTop:"1px solid rgba(0, 0, 0, 0.05)",borderBottom:"1px solid rgba(0, 0, 0, 0.05)"},e.breakpoints.down("sm"),{borderBottom:"none"}),infoDetailBlock:(t={justifyContent:"center",padding:"8px 16px",borderRight:"1px solid rgba(0, 0, 0, 0.05)","&:last-child":{borderRight:"none"}},No(t,e.breakpoints.down("md"),{"&:nth-child(2n)":{borderRight:"none"}}),No(t,e.breakpoints.down("sm"),{borderRight:"none"}),No(t,e.breakpoints.down("xs"),{padding:8}),t),label:{fontSize:16,lineHeight:"normal"},value:{fontSize:16,fontWeight:500,lineHeight:"normal",textAlign:"center"},getHistoryButtonContainer:(n={padding:16,justifyContent:"center"},No(n,e.breakpoints.down("sm"),{marginBottom:8}),No(n,e.breakpoints.down("xs"),{padding:8}),n),button:{fontSize:14,textTransform:"none",backgroundColor:"rgb(0, 188, 212)","&:hover":{backgroundColor:"rgb(0, 188, 212)"}},tableTitleRoot:{paddingLeft:16,paddingRight:0},tableTitle:(a={flex:"0 1 auto"},No(a,e.breakpoints.only("sm"),{minWidth:"40%"}),No(a,"& h6",(r={fontSize:"1.05rem"},No(r,e.breakpoints.only("sm"),{fontSize:"1rem"}),No(r,e.breakpoints.down("xs"),{fontSize:"0.87rem"}),r)),a)}}))(Co),To=n("mq7B"),Lo=n("/EAt"),ko=n("sRsu"),Po=n("3PeG"),Ro=n("Imu7"),Ao=n("Uf6+"),_o=n("bxnI"),zo=n("5B5s"),Bo=n("SSxr");function Uo(e){return(Uo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Wo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ho(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wo(Object(n),!0).forEach((function(t){Ko(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Yo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Go(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Vo(e,t){return(Vo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Zo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Jo(e);if(t){var a=Jo(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Qo(this,n)}}function Qo(e,t){if(t&&("object"===Uo(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Fo(e)}function Fo(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Jo(e){return(Jo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ko(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Xo=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Vo(e,t)}(i,e);var t,n,r,o=Zo(i);function i(){var e;Yo(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Ko(Fo(e=o.call.apply(o,[this].concat(n))),"state",{loading:!0,energyMeterBillingInfoResourceMap:{}}),Ko(Fo(e),"getData",(function(){var t=e.props,n=t.actions,r=t.locationData,a=r.id,o=r.uid;Promise.all([n.getEnergyResourcesList({location_uid:o}),n.getEnergyMetersBillingInfoList(a).then((function(t){e.setState({energyMeterBillingInfoResourceMap:t.data.reduce((function(e,t){return e[t.id]=t.resource_id,e}),{})})}))]).catch((function(){})).finally((function(){e.setState({loading:!1})}))})),Ko(Fo(e),"getResourcesSelectOptions",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=e.props,r=n.classes,o=n.energyResources;return o.data.map((function(e){var n=e.id,o=e.name,i=t.includes(n);return a.a.createElement(C.a,{key:n,value:n,className:r.selectMenuItem},i&&a.a.createElement(Ha.a,{className:"".concat(r.checkIcon," energyMeterBillingInfoResourceLinkedIcon")}),a.a.createElement("span",{style:{marginLeft:i?5:29}},o))}))})),Ko(Fo(e),"onChangeResource",(function(t,n){var r=e.state.energyMeterBillingInfoResourceMap;e.setState({energyMeterBillingInfoResourceMap:Ho(Ho({},r),{},Ko({},t,n))})})),Ko(Fo(e),"submitData",(function(){var t=e.props,n=t.actions,r=t.onUpdated,a=e.state.energyMeterBillingInfoResourceMap,o=Object.keys(a).map((function(e){var t;return Ko(t={},Bo.d.energy_meter_billing_info,Number(e)),Ko(t,Bo.d.resource,a[e]),t}));n.postEnergyMetersBillingInfoResources(o).then((function(){r()})).catch((function(){}))})),Ko(Fo(e),"findDuplicates",(function(e){return e.filter((function(t,n){return t&&e.indexOf(t)!==n}))})),Ko(Fo(e),"renderNoData",(function(t){var n=e.props.classes,r=t?"No energy resource":"No energy meters billing info!";return a.a.createElement(m.a,{container:!0,justify:"center",alignItems:"center",direction:"column",className:n.noDataRoot},a.a.createElement(m.a,{item:!0,className:n.noDataItemBlock},a.a.createElement(O.a,{align:"center",className:n.noDataText},r)))})),e}return t=i,(n=[{key:"componentDidMount",value:function(){this.getData()}},{key:"render",value:function(){var e=this,t=this.state,n=t.loading,r=t.energyMeterBillingInfoResourceMap;if(n)return null;var o=this.props,i=o.classes,c=o.energyMetersBillingData,l=o.energyResources,s=c.data.length>0,u=l.data.length>0,f=Object.values(r),p=this.findDuplicates(f),d=p.length,g=this.getResourcesSelectOptions(f);return a.a.createElement("div",{className:i.root},s&&u?a.a.createElement(m.a,{container:!0,justify:"center"},a.a.createElement(O.a,{className:i.heading},"Link energy meters billing info with resources"),a.a.createElement(m.a,{item:!0,container:!0,xs:12,md:10,className:i.tableContainer},a.a.createElement(Lo.a,{className:i.table},a.a.createElement(Ro.a,null,a.a.createElement(ko.a,null,Object.values(Bo.e).map((function(e){return a.a.createElement(Po.a,{key:e,classes:{root:i.tableHeadCell}},e)})))),a.a.createElement(Ao.a,null,c.data.map((function(t){var n=t.id,o=r[n];return a.a.createElement(ko.a,{className:i.row,key:"meter_".concat(n)},a.a.createElement(Po.a,null,t.meter_id),a.a.createElement(Po.a,null,a.a.createElement(O.a,{component:"div",className:i.resourceSelectWrapper},a.a.createElement(N.a,{className:p.includes(o)?i.errorSelect:"",classes:{select:i.select},label:"Resource",margin:"dense",name:"resource_select_".concat(n),onChange:function(t){e.onChangeResource(n,t.target.value)},value:o||""},g.map((function(e){return e}))),o?a.a.createElement(j.a,{variant:"contained",size:"small",onClick:function(){e.onChangeResource(n,null)},key:"unbind_resource_".concat(n),style:{marginLeft:15}},"unbind"):null)))}))))),a.a.createElement(m.a,{item:!0,container:!0},a.a.createElement(m.a,{item:!0,container:!0,justify:"center"},d>0&&a.a.createElement(O.a,{className:i.errorMessage},"There shoudn't be any duplications")),a.a.createElement(m.a,{item:!0,container:!0,justify:"center"},a.a.createElement(j.a,{className:i.saveButton,key:"save_button",color:"primary",onClick:this.submitData,disabled:d>0},"save")))):this.renderNoData(s))}}])&&Go(t.prototype,n),r&&Go(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(a.a.Component);Xo.defaultProps={locationData:{},onUpdated:function(){}};var qo=Object(i.d)(Object(o.a)((function(e){return{root:{width:"100%",backgroundColor:"rgba(255, 255, 255, 0.87)",fontFamily:"Roboto-Medium"},tableContainer:Ko({marginTop:30,overflowX:"auto",overflowY:"hidden",boxShadow:"0 4px 16px 0 rgba(216, 216, 216, 0.63)",borderRadius:13},e.breakpoints.down("sm"),{borderRadius:0}),table:{},tableHeadCell:{fontSize:16,fontWeight:700,paddingRight:0},row:{"&:nth-of-type(even)":{backgroundColor:e.palette.background.default}},saveButton:{margin:"15px 10px 10px",fontSize:20},errorSelect:{border:"solid red 1px",borderRadius:3,padding:3},errorMessage:{color:"red",marginLeft:25,marginTop:10,fontSize:12},resourceSelectWrapper:{display:"flex",justifyContent:"space-between"},select:{minWidth:70},selectMenuItem:{"& .energyMeterBillingInfoResourceLinkedIcon":{display:"block"}},heading:Ko({marginTop:20,padding:"0px 15px",fontFamily:"Roboto, Helvetica",fontSize:20,textAlign:"center"},e.breakpoints.down("xs"),{fontSize:16}),checkIcon:{fontSize:24,display:"none",verticalAlign:"middle",color:"rgba(0, 0, 0, 0.57)"},noDataRoot:{},noDataItemBlock:Ko({padding:50},e.breakpoints.down("xs"),{paddingLeft:25,paddingRight:25}),noDataText:Ko({color:"rgba(255, 50, 50, 0.87)",fontSize:42,textShadow:"2px 2px 2px #71b7e6"},e.breakpoints.down("xs"),{fontSize:32})}})),Object(c.c)((function(e){return{energyMetersBillingData:e.energyMetersBillingData,energyResources:e.energyResources}}),(function(e){return{actions:Object(i.b)({getEnergyResourcesList:zo.getEnergyResourcesList,getEnergyMetersBillingInfoList:_o.getEnergyMetersBillingInfoList,postEnergyMetersBillingInfoResources:_o.postEnergyMetersBillingInfoResources},e)}})))(Xo),$o=n("YBA5"),ei=n.n($o);function ti(e){return(ti="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ni(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ri(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ai(e,t){return(ai=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function oi(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=li(e);if(t){var a=li(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ii(this,n)}}function ii(e,t){if(t&&("object"===ti(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ci(e)}function ci(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function li(e){return(li=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function si(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ui=Object.freeze({mug_sites:"mug_sites",mug_meters:"mug_meters",switches:"switches",resourceEnergyBILinking:"resourceEnergyBILinking"}),fi=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ai(e,t)}(c,e);var t,n,o,i=oi(c);function c(){var e;ni(this,c);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return si(ci(e=i.call.apply(i,[this].concat(n))),"state",{detailsDialogOpened:!1,detailsKey:null}),si(ci(e),"showDetails",(function(t){e.setState({detailsKey:t},(function(){e.toggleDetailsDataDialog()}))})),si(ci(e),"toggleDetailsDataDialog",(function(){e.setState((function(e){return{detailsDialogOpened:!e.detailsDialogOpened}}))})),si(ci(e),"renderDetails",(function(){var t=e.state.detailsKey;if(Object(u.isNil)(t))return null;var n=e.props,r=n.data,o=n.school,i=o.id,c=o.uid;switch(t){case ui.mug_sites:return a.a.createElement(Io,{title:"MUG sites",data:r.mug_sites,dataPropsToDisplayConfig:{propsList:Vt,propsConfigDict:Zt}});case ui.mug_meters:return a.a.createElement(Io,{title:"MUG meters",data:r.mug_meters,dataPropsToDisplayConfig:{propsList:Ft,propsConfigDict:Jt}});case ui.switches:return a.a.createElement(To.a,{schoolId:i});case ui.resourceEnergyBILinking:var l=e.props.onUpdated;return a.a.createElement(qo,{locationData:{id:i,uid:c},onUpdated:function(){l(),e.toggleDetailsDataDialog()}});default:return null}})),e}return t=c,(n=[{key:"render",value:function(){var e=this,t=this.props,n=t.classes,o=t.data,i=t.school;if(Object(u.isNil)(o)||Object(u.isNil)(i))return null;var c=i.name,l=this.state.detailsDialogOpened,s=o.mug_customer_id,f=!Object(u.isNil)(s);return a.a.createElement(m.a,{item:!0,xs:12,container:!0,alignItems:"center",justify:"center",className:n.root},a.a.createElement(m.a,{item:!0,xs:12,container:!0,justify:"center"},a.a.createElement(O.a,{className:n.title},"MUG Integration Info")),a.a.createElement(m.a,{item:!0,xs:12,container:!0,className:n.detailsContainer},f?a.a.createElement(r.Fragment,null,a.a.createElement(m.a,{item:!0,xs:12,container:!0},a.a.createElement(O.a,{className:n.rightContentText},"MUG customer id: ",a.a.createElement("span",{className:n.rightContentValue},s))),a.a.createElement(m.a,{item:!0,xs:12,container:!0,className:n.infoBlock,justify:"center"},a.a.createElement(m.a,{item:!0,container:!0,xs:6,className:n.infoDetailBlock,justify:"center"},a.a.createElement(j.a,{className:n.link,onClick:function(){e.showDetails(ui.mug_sites)}},"MUG sites")),a.a.createElement(m.a,{item:!0,container:!0,xs:6,className:n.infoDetailBlock,justify:"center"},a.a.createElement(j.a,{className:n.link,onClick:function(){e.showDetails(ui.mug_meters)}},"MUG meters"))),a.a.createElement(m.a,{item:!0,xs:12,container:!0,className:n.blockTitle},a.a.createElement(O.a,{className:n.blockTitleText},"Switches statistics")),a.a.createElement(m.a,{item:!0,xs:12,container:!0,className:n.infoBlock},Kt.map((function(e){var t=Xt[e],r=o.switches_per_status[e],i=Object(u.isNil)(r)?Qe.nA:Object(u.round)(r,1);return a.a.createElement(m.a,{key:e,item:!0,container:!0,md:4,className:n.infoDetailBlock},a.a.createElement(m.a,{item:!0,container:!0,xs:9,alignItems:"center"},a.a.createElement(O.a,{className:n.label},t)),a.a.createElement(m.a,{item:!0,container:!0,xs:3,alignItems:"center",justify:"flex-end"},a.a.createElement(O.a,{className:n.value},i)))})),a.a.createElement(m.a,{item:!0,container:!0,md:4,className:n.infoDetailBlock},a.a.createElement(j.a,{className:n.link,onClick:function(){e.showDetails(ui.switches)}},"Switches"))),a.a.createElement(m.a,{item:!0,container:!0,md:12,className:n.infoDetailBlock},a.a.createElement(j.a,{color:"primary",className:n.button,variant:"contained",onClick:function(){e.showDetails(ui.resourceEnergyBILinking)}},"Linking resources")),a.a.createElement(mr,{titleIcon:ei.a,title:c,isOpened:l,breakpointDownUseFullScreen:"sm",classes:{dialogTitle:n.detailsDialogTitle},onClose:this.toggleDetailsDataDialog},this.renderDetails())):a.a.createElement(m.a,{item:!0,container:!0,xs:12,justify:"center",alignItems:"center"},a.a.createElement(O.a,{className:n.noData},"No MUG customer id!"))))}}])&&ri(t.prototype,n),o&&ri(t,o),Object.defineProperty(t,"prototype",{writable:!1}),c}(r.PureComponent),pi=Object(o.a)((function(e){var t,n;return{root:{width:"100%",border:"1px solid rgba(0, 0, 0, 0.1)"},title:si({width:"100%",padding:"8px 16px",fontWeight:500,fontSize:21,textAlign:"center",borderBottom:"1px solid rgba(0, 0, 0, 0.05)"},e.breakpoints.down("xs"),{fontSize:18}),detailsContainer:{justifyContent:"center"},infoDetailBlock:(t={justifyContent:"center",padding:"8px 16px",borderRight:"1px solid rgba(0, 0, 0, 0.05)","&:last-child":{borderRight:"none"}},si(t,e.breakpoints.down("sm"),{borderRight:"none"}),si(t,e.breakpoints.down("xs"),{padding:8}),t),rightContentText:si({padding:"8px 16px",fontSize:16,width:"100%",textAlign:"right"},e.breakpoints.down("xs"),{padding:8}),rightContentValue:{fontWeight:500},infoBlock:si({borderTop:"1px solid rgba(0, 0, 0, 0.05)",borderBottom:"1px solid rgba(0, 0, 0, 0.05)"},e.breakpoints.down("sm"),{borderTop:"none",borderBottom:"none"}),blockTitle:{justifyContent:"center"},blockTitleText:si({width:"100%",padding:8,textAlign:"center",fontSize:18,fontWeight:500},e.breakpoints.down("xs"),{fontSize:15}),label:{fontSize:16,lineHeight:"normal"},value:{fontSize:16,fontWeight:500,lineHeight:"normal",textAlign:"center"},getDevicesButtonContainer:(n={padding:12,justifyContent:"center"},si(n,e.breakpoints.down("sm"),{marginBottom:8}),si(n,e.breakpoints.down("xs"),{padding:8}),n),button:{minWidth:115,fontSize:14,textTransform:"none",backgroundColor:"rgb(0, 188, 212)","&:hover":{backgroundColor:"rgb(0, 188, 212)"}},link:{fontSize:16,color:"rgb(13, 180, 225)",textTransform:"none",textDecoration:"underline",backgroundColor:"transparent","&:hover":{backgroundColor:"transparent",textDecoration:"underline"}},detailsDialogTitle:si({padding:"0px 24px",margin:"16px auto",fontWeight:500},e.breakpoints.down("xs"),{margin:"12px auto",padding:"0px 12px"}),noData:{fontSize:18,color:Ye.alert,padding:8}}}))(fi);function di(e){return(di="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mi(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function gi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function bi(e,t){return(bi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function yi(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=vi(e);if(t){var a=vi(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return hi(this,n)}}function hi(e,t){if(t&&("object"===di(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return wi(e)}function wi(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function vi(e){return(vi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ji(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Oi=a.a.createElement("br",null),Mi=a.a.createElement("span",null,"Schools list"),xi=a.a.createElement(ca,{text:"Please select a school from the list to see detailed information"}),Si=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&bi(e,t)}(c,e);var t,n,o,i=yi(c);function c(){var e;mi(this,c);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return ji(wi(e=i.call.apply(i,[this].concat(n))),"state",{selectedSchoolId:null,showMenu:!1,searchTerm:"",selectedSchoolType:We.all_schools}),ji(wi(e),"mobileMenuRef",Object(r.createRef)()),ji(wi(e),"scrollButtonRef",Object.values(Ue).reduce((function(e,t){return e[t]=Object(r.createRef)(),e}),{})),ji(wi(e),"onSearchUpdate",(function(t){e.setState({searchTerm:t})})),ji(wi(e),"getContainerHeight",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=cn(z.c),n=cn(z.b),r=t+n+e;return"calc(100vh - ".concat(r,"px)")})),ji(wi(e),"handleClickOutside",(function(t){e.mobileMenuRef.current.contains(t.target)||e.scrollButtonRef[Ue.mobile].current.contains(t.target)||e.toggleDrawer(!1)})),ji(wi(e),"handleMenuListScroll",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ue.desktop;return function(n){n.stopPropagation(),n.persist&&n.persist(),clearTimeout(e.scrollTimer),e.scrollTimer=setTimeout((function(){var r=$(n.target).scrollTop(),a=e.scrollButtonRef[t];Object(u.isNil)(a)||Object(u.isNil)(a.current)||(a.current.style.visibility=r>150?"visible":"hidden")}),150)}})),ji(wi(e),"selectSchool",(function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(){e.setState({selectedSchoolId:t.id},(function(){n&&e.toggleDrawer(!1)}))}})),ji(wi(e),"onMenuButtonClick",(function(t){t.stopPropagation();var n=e.state.showMenu;e.toggleDrawer(!n)})),ji(wi(e),"getScrollButtonClickHandler",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"html,body";return function(n){n.stopPropagation(),e.scrollMenuListToTop(t)}})),ji(wi(e),"scrollMenuListToTop",(function(e){$(e).animate({scrollTop:0},"fast")})),ji(wi(e),"toggleDrawer",(function(t){e.setState({showMenu:t})})),ji(wi(e),"onSelectUpdate",(function(t){var n=t.target.value;e.setState({selectedSchoolType:n})})),ji(wi(e),"schoolTypeFilter",(function(t){switch(e.state.selectedSchoolType){case We.real_schools:return!t.is_test;case We.test_schools:return t.is_test;default:return!0}})),ji(wi(e),"updateSelectedSchoolInfo",(function(t){var n=e.props.actions,r=e.state.selectedSchoolId;n.updateSchoolMetricsData(r,t).then((function(t){e.updateSelectedSchoolSmartAppStatus(t)})).catch((function(){}))})),ji(wi(e),"updateSelectedSchoolSmartAppStatus",(function(t){if(t&&t.smart_things_app_token){var n=t.smart_things_app_token.app_id;if(!Object(u.isNil)(n)){var r=e.props.actions;r.getUpdatedSmartAppStatus(n).then((function(e){if(e.success){var n=t.id;r.updateSchoolSmartAppStatus(n,e.data)}}))}}})),ji(wi(e),"renderTestLabel",(function(e,t){return e?a.a.createElement(D.a,{className:t},"test"):""})),ji(wi(e),"abbreviateAbnormalValueNotificationsCount",(function(e){return e<100?e:e>=100&&e<1e3?"99+":e>=1e3&&e<1e6?"".concat(+(e/1e3).toFixed(1),"k"):e>=1e6&&e<1e9?"".concat(+(e/1e6).toFixed(1),"m"):e>=1e9&&e<1e12?"".concat(+(e/1e9).toFixed(1),"b"):e>=1e12?"".concat(+(e/1e12).toFixed(1),"t"):void 0})),ji(wi(e),"renderMenuList",(function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=e.props,r=n.classes,o=n.actions,i=n.schools,c=e.state,l=c.selectedSchoolId,d=c.searchTerm,g=c.selectedSchoolType,y=i.filter(e.schoolTypeFilter).filter(Object(f.createFilter)(d,["name"])),v=y.length;return a.a.createElement("div",{ref:function(t){e.menu=t},className:r.menuRoot},a.a.createElement(m.a,{id:Be.menuTitle,container:!0,alignItems:"center",className:r.menuTitleContainer},a.a.createElement(E.a,{xsDown:!0},a.a.createElement(m.a,{item:!0,xs:3,container:!0,alignItems:"center"},a.a.createElement(O.a,{className:r.menuTitleText},"SCHOOLS (",v,")"))),a.a.createElement(m.a,{item:!0,sm:4,xs:6,container:!0,alignItems:"center",justify:"center"},a.a.createElement(N.a,{value:g,onChange:e.onSelectUpdate},He.map((function(e){return a.a.createElement(C.a,{key:e.value,value:e.value},e.label)})))),a.a.createElement(m.a,{item:!0,sm:5,xs:6,container:!0,alignItems:"center",justify:"flex-end"},a.a.createElement(p.a,{value:d,className:r.searchInput,onChange:e.onSearchUpdate,placeholder:"Search by name"}))),a.a.createElement(b.a,{ref:function(t){e.menuList=t},component:"div",className:r.menuList,onScroll:e.handleMenuListScroll(),style:{height:"calc(100% - ".concat(cn(Be.menuTitle),"px)")}},y.map((function(n){var i=n.id,c=n.name,f=n.uid,p=n.pupils_count,d=n.created_at,g=l===i;return a.a.createElement(M.a,{key:i,button:!0,classes:{root:r.menuItem,selected:r.menuItemSelected},disableRipple:!0,onClick:e.selectSchool(n,t),selected:g},e.renderTestLabel(n.is_test,r.testLabel),a.a.createElement(x.a,{disableTypography:!0,classes:{root:r.menuItemTextRoot,primary:r.menuItemText}},a.a.createElement(m.a,{container:!0},a.a.createElement(m.a,{item:!0,container:!0,xs:6,alignItems:"center",alignContent:"center"},a.a.createElement(O.a,{className:r.menuItemText},a.a.createElement("span",{style:{color:"rgb(13, 180, 225)"}},c)),Oi,a.a.createElement(O.a,{className:r.menuItemExtraInfoItem},"school uid: ",f,a.a.createElement(k.a,{className:r.copyIcon,onClick:function(e){e.stopPropagation(),Object(zn.a)(f,"Copied ".concat(c," uid"),o.showMessageSnackbar)}})),a.a.createElement(O.a,{className:r.menuItemExtraInfoItem},"school id: ",i),a.a.createElement(O.a,{className:r.menuItemExtraInfoItem},"pupils count: ",Object(u.isNil)(p)?Qe.question:p),a.a.createElement(O.a,{className:r.menuItemExtraInfoItem},"registered: ",s()(d).format("DD/MM/YYYY"))),a.a.createElement(m.a,{item:!0,container:!0,xs:6},ln.map((function(e){var t=on[e],r=t.title,o=t.dataProp,c=t.getStatusColor,l=t.getStatusInfo,s=n[o],u=t.getStatus(s);return a.a.createElement(m.a,{item:!0,key:"".concat(e,"_").concat(i)},a.a.createElement(kn,{statusId:"".concat(e,"_").concat(i),title:r,statusColor:c(u),statusInfo:l(u,s)}))}))))))}))),a.a.createElement(E.a,{mdDown:!0},a.a.createElement(S.a,{rootRef:e.scrollButtonRef[Ue.desktop]},a.a.createElement(w.a,{id:"school_monitoring_menu_scroll_button_".concat(Ue.desktop),className:r.expand,style:{position:"absolute",bottom:10},onClick:e.getScrollButtonClickHandler(e.menuList)},a.a.createElement(h.a,{style:{color:"rgb(255, 255, 255)"}})))))})),ji(wi(e),"renderDetailedInfo",(function(t){var n=e.props,o=n.classes,i=n.history,c=t.id,l=t.uid,s=t.name;return a.a.createElement(r.Fragment,null,a.a.createElement(m.a,{item:!0,container:!0,xs:12,justify:"center",alignItems:"center",className:o.schoolNameTextWrapper},a.a.createElement(O.a,{className:o.schoolNameText},s,a.a.createElement(R.a,{className:o.refreshSchoolDataIcon,onClick:function(){e.updateSelectedSchoolInfo({showMessageOnSucces:!0,showMessageOnFailure:!0})}}))),a.a.createElement(m.a,{item:!0,container:!0,xs:12,className:o.detailsItemsContainer},a.a.createElement(m.a,{item:!0,container:!0,xs:12,className:o.detailsItemWrapper},a.a.createElement(jn,{classes:{root:o.detailsItemRoot},data:t.smart_things_app_token,schoolId:c})),a.a.createElement(m.a,{item:!0,container:!0,xs:12,className:o.detailsItemWrapper},a.a.createElement(oa,{data:t.energy_meters,schoolId:c,classes:{root:o.detailsItemRoot},refreshSchoolInfo:function(){e.updateSelectedSchoolInfo({showMessageOnSucces:!0,showMessageOnFailure:!0})}})),a.a.createElement(m.a,{item:!0,container:!0,xs:12,className:o.detailsItemWrapper},a.a.createElement(va,{schoolUid:l,data:t.consumption,meters:t.energy_meters,classes:{root:o.detailsItemRoot},history:i})),a.a.createElement(m.a,{item:!0,container:!0,xs:12,className:o.detailsItemWrapper},a.a.createElement(La,{tariffs:t.tariffs,classes:{root:o.detailsItemRoot}})),a.a.createElement(m.a,{item:!0,container:!0,xs:12,className:o.detailsItemWrapper},a.a.createElement(Jn,{classes:{root:o.detailsItemRoot},schoolUid:l,activityStatisticsData:t.last_dashboard_ping})),a.a.createElement(m.a,{item:!0,container:!0,xs:12,className:o.detailsItemWrapper},a.a.createElement(pi,{school:{name:s,id:c,uid:l},data:t.mug_data,onUpdated:e.updateSelectedSchoolInfo,classes:{root:o.detailsItemRoot}}))))})),e}return t=c,(n=[{key:"componentDidMount",value:function(){this.handleWindowScroll=this.handleMenuListScroll(Ue.mobile),window.addEventListener("scroll",this.handleWindowScroll),this.props.actions.getSchoolsMonitoringDataList()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.handleWindowScroll)}},{key:"render",value:function(){var e=this,t=this.props,n=t.classes,r=t.schools,o=this.state,i=o.showMenu,c=o.selectedSchoolId,l=r.find((function(e){return e.id===c}));return a.a.createElement("div",{className:n.root,style:{height:this.getContainerHeight()}},a.a.createElement(m.a,{container:!0,justify:"center",alignContent:"flex-start",className:n.dashboardContainer},a.a.createElement(m.a,{id:Be.pageTitle,item:!0,container:!0,xs:12,justify:"center",alignItems:"center",className:n.pageTitle},a.a.createElement(O.a,{align:"center",className:n.pageTitleText},"Schools Monitoring Dashboard")),a.a.createElement(m.a,{container:!0},a.a.createElement("div",{className:n.menuButtonContainer,ref:this.mobileMenuRef},a.a.createElement(E.a,{lgUp:!0},a.a.createElement(j.a,{onClick:this.onMenuButtonClick,className:n.openMenuButton},a.a.createElement(T.a,{className:n.listIcon}),Mi))),a.a.createElement(E.a,{lgUp:!0},a.a.createElement(m.a,{item:!0,container:!0,xs:12},a.a.createElement(v.a,{anchorEl:this.mobileMenuRef.current,open:i,placement:"bottom-start",transition:!0,style:{zIndex:400,width:"100%",opacity:1,backgroundColor:"rgba(240, 250, 255, 1)"},popperOptions:{modifiers:{preventOverflow:{enabled:!1,padding:0},hide:{enabled:!1},flip:{enabled:!1}}}},(function(t){var n=t.TransitionProps;return a.a.createElement(d.a,{onClickAway:e.handleClickOutside},a.a.createElement(g.a,n,e.renderMenuList(!0)))}))))),a.a.createElement(m.a,{container:!0,className:n.contentContainer,justify:"space-between",style:{height:"calc(100% - ".concat(cn(Be.pageTitle),"px)")}},a.a.createElement(E.a,{mdDown:!0},a.a.createElement(m.a,{item:!0,lg:4,container:!0,style:{height:"100%"}},this.renderMenuList())),a.a.createElement(m.a,{item:!0,container:!0,lg:8,justify:"center",alignContent:"flex-start",className:n.detailedInfoContainer},Object(u.isNil)(l)?xi:this.renderDetailedInfo(l)))),a.a.createElement(E.a,{lgUp:!0},a.a.createElement(S.a,{rootRef:this.scrollButtonRef[Ue.mobile]},a.a.createElement(w.a,{id:"school_monitoring_menu_scroll_button_".concat(Ue.mobile),className:n.expand,style:{position:"fixed",bottom:55},onClick:this.getScrollButtonClickHandler()},a.a.createElement(h.a,{style:{color:"rgb(255, 255, 255)"}})))))}}])&&gi(t.prototype,n),o&&gi(t,o),Object.defineProperty(t,"prototype",{writable:!1}),c}(r.PureComponent);t.default=Object(i.d)(Object(o.a)((function(e){var t,n;return{root:ji({width:"100%",position:"relative",overflow:"hidden",backgroundImage:"linear-gradient(to bottom, rgb(250, 255, 255), rgba(0, 150, 212, 0.06) 90%, rgba(0, 150, 212, 0.08))",backgroundColor:"rgb(255, 255, 255)"},e.breakpoints.down("md"),{height:"auto !important"}),dashboardContainer:{height:"100%",justifyContent:"center"},pageTitle:{height:60,width:"100%",backgroundColor:"rgba(152, 229, 246, 0.5)",backgroundImage:"radial-gradient(rgba(0, 188, 212, 0.2), rgb(38, 229, 243))",borderBottom:"1px solid rgba(0, 0, 0, 0.1)"},pageTitleText:(t={fontSize:24,fontWeight:500,fontFamily:"Roboto, Helvetica",letterSpacing:2,wordSpacing:10,color:"rgba(0, 0, 0, 0.7)"},ji(t,e.breakpoints.down("md"),{fontSize:21}),ji(t,e.breakpoints.down("xs"),{fontSize:18,wordSpacing:4,letterSpacing:.7}),t),menuRoot:ji({width:"90%",height:"100%",color:"rgb(0, 0, 0)",position:"relative",backgroundColor:"rgba(179, 242, 255, 0.2)",zIndex:999,borderBottom:"1px solid rgba(0, 0, 0, 0.1)",borderRight:"1px solid rgba(0, 0, 0, 0.1)"},e.breakpoints.down("md"),{borderRadius:0}),menuTitleContainer:ji({padding:"0px 25px",width:"100%",height:60,borderBottom:"1px solid rgba(0, 0, 0, 0.1)",justifyContent:"space-between"},e.breakpoints.down("xs"),{padding:"0px 12px"}),menuTitleText:{fontSize:14,fontWeight:500,color:"rgb(0, 0, 0)"},menuList:{width:"100%",padding:0,overflow:"auto"},menuItem:{overflow:"hidden",breakInside:"avoid",paddingLeft:25,paddingRight:8,maxWidth:"100%",color:"rgba(0, 0, 0, 0.67)","&:hover":{backgroundColor:"rgba(0, 150, 255, 0.04)"}},menuItemSelected:{color:"rgba(0, 0, 0, 0.87)",backgroundColor:"rgba(0, 150, 255, 0.09) !important"},menuItemTextRoot:{paddingLeft:0,paddingRight:0,color:"inherit !important"},menuItemText:ji({fontFamily:"Roboto, Helvetica",fontSize:14,color:"inherit !important",textTransform:"none",fontWeight:500,paddingRight:10,wordBreak:"break-word",whiteSpace:"normal"},e.breakpoints.down("md"),{fontSize:12}),menuItemExtraInfoItem:ji({width:"100%",fontSize:14,textTransform:"none",marginTop:3},e.breakpoints.down("md"),{fontSize:12}),copyIcon:{fontSize:18,marginLeft:8,color:"rgba(0, 0, 0, 0.57) !important",verticalAlign:"top",marginTop:"-2px"},expand:ji({visibility:"hidden",right:25,backgroundColor:"rgb(0, 188, 212)",transform:"rotate(180deg)",marginTop:0,height:40,width:40,fontWeight:700,zIndex:1200,padding:0,"&:hover":{backgroundColor:"rgba(0, 188, 212, 0.7)"}},e.breakpoints.down("sm"),{right:"1%"}),menuButtonContainer:{width:"100%",minHeight:0,textAlign:"right",padding:"0px 8px",backgroundColor:"rgba(152, 229, 246, 0.7)"},listIcon:ji({fontSize:32,marginRight:8},e.breakpoints.down("sm"),{fontSize:28}),openMenuButton:{color:"rgba(0, 0, 0, 0.87)",borderRadius:0},contentContainer:ji({alignContent:"flex-start"},e.breakpoints.down("md"),{height:"auto !important"}),detailedInfoContainer:(n={overflow:"auto",padding:"0px 25px 0px 0px",height:"100%"},ji(n,e.breakpoints.down("md"),{height:"auto !important"}),ji(n,e.breakpoints.down("xs"),{padding:"0px 12px"}),n),detailsItemsContainer:{marginBottom:25},detailsItemWrapper:{marginBottom:25},detailsItemRoot:{borderRadius:13,backgroundColor:"rgba(179, 242, 255, 0.05)"},searchInput:{"& input":ji({width:"100%",fontSize:14,border:"none",borderRadius:5,lineHeight:"22px",padding:"5px 10px 5px 25px",height:32,position:"relative","&:focus":{outline:"none",border:"1px solid rgba(0, 188, 212, 0.5)"},"&::placeholder":{opacity:.6},"&:-ms-input-placeholder":{opacity:.6},"&::-ms-input-placeholder":{opacity:.6}},e.breakpoints.down("xs"),{padding:"5px 10px 5px 20px"})},schoolNameTextWrapper:{minHeight:60,overflow:"hidden"},schoolNameText:ji({display:"flex",alignItems:"center",fontSize:24,fontWeight:500,textAlign:"center",lineHeight:"normal",padding:"8px 0px",maxHeight:"100%",overflow:"hidden"},e.breakpoints.down("xs"),{fontSize:20}),testLabel:{position:"absolute",left:-10,width:40,height:20,fontWeight:600,textAlign:"center",transform:"rotate(-90deg)",color:"rgb(255, 255, 255)",background:"rgb(204, 204, 204)",borderRadius:5},refreshSchoolDataIcon:{cursor:"pointer",color:"rgb(13, 180, 240)",marginLeft:8},notificationBadge:{marginLeft:8,marginRight:4,color:"rgb(255, 255, 255)"},notificationBadgeBackground:{backgroundColor:Ye.alert},monitoringDashboardButtons:ji({padding:"6px 14px",minHeight:0,minWidth:0},e.breakpoints.down("xs"),{padding:"3px 6px"})}})),Object(c.c)((function(e){return{schools:e.schoolsMonitoringData.schools.data}}),(function(e){return{actions:Object(i.b)({getSchoolsMonitoringDataList:H,updateSchoolMetricsData:G,getUpdatedSmartAppStatus:V,updateSchoolSmartAppStatus:Z,showMessageSnackbar:U.showMessageSnackbar},e)}})))(Si)},ser1:function(e,t,n){"use strict";var r=n("q1tI"),a=n.n(r),o=(n("17x9"),n("H2TA")),i=n("/EAt"),c=n("Uf6+"),l=n("3PeG"),s=n("xMA7"),u=n("ELmG"),f=n("sRsu"),p=n("Imu7"),d=n("kKAo"),m=n("PsDL"),g=n("/z3n"),b=n.n(g),y=n("CarD"),h=n.n(y),w=n("8C4M"),v=n.n(w),j=n("RJ8S"),O=n.n(j);function M(e){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function x(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I(e);if(t){var a=I(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return N(this,n)}}function N(e,t){if(t&&("object"===M(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return C(e)}function C(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function I(e){return(I=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function T(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var L=a.a.createElement(b.a,null),k=a.a.createElement(h.a,null),P=a.a.createElement(v.a,null),R=a.a.createElement(O.a,null),A=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&E(e,t)}(i,e);var t,n,r,o=D(i);function i(){var e;x(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return T(C(e=o.call.apply(o,[this].concat(n))),"handleFirstPageButtonClick",(function(t){(0,e.props.onChangePage)(t,0)})),T(C(e),"handleBackButtonClick",(function(t){var n=e.props;(0,n.onChangePage)(t,n.page-1)})),T(C(e),"handleNextButtonClick",(function(t){var n=e.props;(0,n.onChangePage)(t,n.page+1)})),T(C(e),"handleLastPageButtonClick",(function(t){var n=e.props,r=n.onChangePage,a=n.count,o=n.rowsPerPage;r(t,Math.max(0,Math.ceil(a/o)-1))})),e}return t=i,(n=[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.count,r=e.page,o=e.rowsPerPage;return a.a.createElement("div",{className:t.root},a.a.createElement(m.a,{onClick:this.handleFirstPageButtonClick,disabled:0===r,"aria-label":"First Page"},L),a.a.createElement(m.a,{onClick:this.handleBackButtonClick,disabled:0===r,"aria-label":"Previous Page"},k),a.a.createElement(m.a,{onClick:this.handleNextButtonClick,disabled:r>=Math.ceil(n/o)-1,"aria-label":"Next Page"},P),a.a.createElement(m.a,{onClick:this.handleLastPageButtonClick,disabled:r>=Math.ceil(n/o)-1,"aria-label":"Last Page"},R))}}])&&S(t.prototype,n),r&&S(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(a.a.Component),_=Object(o.a)((function(e){return{root:{flexShrink:0,color:e.palette.text.secondary,marginLeft:e.spacing(2.5)}}}),{withTheme:!0})(A);function z(e){return(z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function B(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function U(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function W(e,t){return(W=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function H(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=V(e);if(t){var a=V(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Y(this,n)}}function Y(e,t){if(t&&("object"===z(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return G(e)}function G(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function V(e){return(V=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Z(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Q=[5,10,25],F=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&W(e,t)}(m,e);var t,n,r,o=H(m);function m(){var e;B(this,m);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Z(G(e=o.call.apply(o,[this].concat(n))),"state",{page:0,rowsPerPage:5}),Z(G(e),"handleChangePage",(function(t,n){e.setState({page:n})})),Z(G(e),"handleChangeRowsPerPage",(function(t){e.setState({rowsPerPage:Number(t.target.value)})})),e}return t=m,(n=[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.rows,r=e.showTableHead,o=e.paginationColSpan,m=this.state,g=m.rowsPerPage,b=m.page,y=g-Math.min(g,n.length-b*g);return a.a.createElement(d.a,{className:t.root},a.a.createElement("div",{className:t.tableWrapper},a.a.createElement(i.a,{className:t.table},r&&n.length>0&&a.a.createElement(p.a,null,a.a.createElement(f.a,null,Object.keys(n[0]).map((function(e){return a.a.createElement(l.a,{key:"head_".concat(e),classes:{root:t.tableCellHead}},e)})))),a.a.createElement(c.a,null,n.slice(b*g,b*g+g).map((function(e,n){return a.a.createElement(f.a,{key:"row_".concat(n)},Object.keys(e).map((function(n){return a.a.createElement(l.a,{key:"column_".concat(n),classes:{root:t.tableCellRoot}},e[n])})))})),y>0&&a.a.createElement(f.a,{classes:{root:t.emptyTableRow}},a.a.createElement(l.a,{colSpan:6,classes:{root:t.emptyRowCellRoot}}))),a.a.createElement(s.a,null,n.length>Q[0]&&a.a.createElement(f.a,null,a.a.createElement(u.a,{classes:{root:t.paginationRoot,toolbar:t.paginationToolbar,spacer:t.paginationSpacer},rowsPerPageOptions:Q,colSpan:o,count:n.length,rowsPerPage:g,page:b,SelectProps:{native:!0},onChangePage:this.handleChangePage,onChangeRowsPerPage:this.handleChangeRowsPerPage,ActionsComponent:_}))))))}}])&&U(t.prototype,n),r&&U(t,r),Object.defineProperty(t,"prototype",{writable:!1}),m}(a.a.Component);F.defaultProps={showTableHead:!1,paginationColSpan:3};t.a=Object(o.a)((function(e){return{root:{width:"100%",marginTop:e.spacing(3),marginBottom:e.spacing(3)},table:{minWidth:300},tableCellHead:{padding:"4px 16px",fontWeight:700},tableCellRoot:{padding:"4px 16px"},tableWrapper:{overflowX:"auto"},emptyTableRow:{height:48},emptyRowCellRoot:{},paginationRoot:{},paginationToolbar:{},paginationSpacer:{}}}))(F)}}]);